<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="businessCollege">كلية العلوم الإدارية والمالية | جامعة SEU</title>
        <meta name="description" content="اكتشف مواد وخطط وتخصصات كلية العلوم الإدارية والمالية بجامعة SEU مع مصادر دراسية وروابط مفيدة وأدلة للنجاح الأكاديمي.">
        <meta name="keywords" content="جامعة SEU, كلية العلوم الإدارية والمالية, مواد جامعة السعودية الإلكترونية, خطط دراسية, تخصصات, موارد, إدارة أعمال, محاسبة, مالية, تسويق, نظم معلومات إدارية">
        <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://subjectsearch.tech/page/all-colleges/business/business.html">
    <link rel="alternate" href="https://subjectsearch.tech/page/all-colleges/business/business.html" hreflang="ar">
    <link rel="alternate" href="https://subjectsearch.tech/page/all-colleges/business/business.html" hreflang="x-default">
        <meta property="og:type" content="website">
        <meta property="og:site_name" content="Subject Search | SEU">
        <meta property="og:title" content="كلية العلوم الإدارية والمالية | جامعة SEU">
        <meta property="og:description" content="دليل شامل لمواد ومسارات كلية العلوم الإدارية والمالية بجامعة SEU مع روابط ومصادر موثوقة.">
    <meta property="og:url" content="https://subjectsearch.tech/page/all-colleges/business/business.html">
        <meta property="og:locale" content="ar_SA">
        <meta property="og:image" content="https://subjectsearch.tech/assets/national_day.jpg">
        <meta name="twitter:card" content="summary_large_image">
        <meta name="twitter:title" content="كلية العلوم الإدارية والمالية | جامعة SEU">
        <meta name="twitter:description" content="استعرض المواد والخطط والمسارات مع مصادر وروابط لكلية العلوم الإدارية والمالية بجامعة SEU.">
        <meta name="twitter:image" content="https://subjectsearch.tech/assets/national_day.jpg">
        <meta name="theme-color" content="#6C63FF">
        <link rel="sitemap" type="application/xml" title="Sitemap" href="https://subjectsearch.tech/sitemap.xml">

        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "WebSite",
            "name": "Subject Search | SEU",
            "url": "https://subjectsearch.tech/",
            "inLanguage": "ar",
            "potentialAction": {
                "@type": "SearchAction",
                "target": "https://subjectsearch.tech/?q={search_term_string}",
                "query-input": "required name=search_term_string"
            }
        }
        </script>
        <script type="application/ld+json">
        {
            "@context": "https://schema.org",
            "@type": "WebPage",
            "name": "كلية العلوم الإدارية والمالية | جامعة SEU",
            "url": "https://subjectsearch.tech/page/all-colleges/business/business.html",
            "isPartOf": {"@type": "WebSite", "url": "https://subjectsearch.tech/"},
            "inLanguage": "ar",
            "description": "دليل المواد والخطط والتخصصات والمصادر لكلية العلوم الإدارية والمالية بجامعة SEU.",
            "breadcrumb": {
                "@type": "BreadcrumbList",
                "itemListElement": [
                    {"@type": "ListItem", "position": 1, "name": "الرئيسية", "item": "https://subjectsearch.tech/"},
                    {"@type": "ListItem", "position": 2, "name": "جميع الكليات", "item": "https://subjectsearch.tech/page/all-colleges/all-colleges.html"},
                    {"@type": "ListItem", "position": 3, "name": "كلية العلوم الإدارية والمالية", "item": "https://subjectsearch.tech/page/all-colleges/business/business.html"}
                ]
            }
        }
        </script>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <script>
        // Tailwind CSS Configuration for custom colors
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        plasma: '#ec4899',
                        aurora: '#8b5cf6',
                        stardust: '#c4b5fd',
                        photon: '#a78bfa',
                        nebula: '#1e1b4b',
                    }
                }
            }
        }
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Firebase CDN -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    
    <!-- Firebase Configuration -->
    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCen8J6HuLOj3d1tpEA8aF13XVmGxiG9BY",
            authDomain: "seu-subjects.firebaseapp.com",
            projectId: "seu-subjects",
            storageBucket: "seu-subjects.firebasestorage.app",
            messagingSenderId: "552315681734",
            appId: "1:552315681734:web:d7ae70e54e7e2bf7b290c7",
            measurementId: "G-Y2FL6V8X3L"
        };

        // Initialize Firebase with error handling
        try {
            firebase.initializeApp(firebaseConfig);
            const db = firebase.firestore();
            const auth = firebase.auth();
            
            // Collection reference for user-added courses
            const coursesCollection = db.collection('userCourses');
            
            console.log('✅ Firebase تم تهيئته بنجاح');
            
            // Make functions globally available immediately
            window.db = db;
            window.coursesCollection = coursesCollection;
            window.auth = auth;
            
        } catch (error) {
            console.error('❌ خطأ في تهيئة Firebase:', error);
        }
        
        // Test Firebase connection function
        async function testFirebaseConnection() {
            console.log('🧪 اختبار اتصال Firebase...');
            
            if (!window.db || !window.coursesCollection) {
                console.error('❌ Firebase غير مهيأ بشكل صحيح');
                return false;
            }
            
            try {
                // بدلاً من الوصول المباشر، استخدم onSnapshot للاستماع
                console.log('🔄 محاولة الاتصال بـ Firebase...');
                
                // تجربة بسيطة للقراءة
                const unsubscribe = window.coursesCollection.onSnapshot(
                    (snapshot) => {
                        console.log('✅ اتصال Firebase يعمل بنجاح!');
                        console.log('📊 حالة قاعدة البيانات: جاهزة');
                        console.log('📄 عدد المستندات:', snapshot.size);
                        
                        if (snapshot.size > 0) {
                            console.log('🎉 هناك مواد محفوظة في Firebase:');
                            snapshot.forEach(doc => {
                                console.log('📚', doc.id, ':', doc.data().title);
                            });
                        } else {
                            console.log('📝 لا توجد مواد محفوظة بعد - جرب إضافة مادة!');
                        }
                        
                        // إلغاء الاستماع بعد الحصول على النتيجة
                        unsubscribe();
                    },
                    (error) => {
                        console.error('❌ فشل اتصال Firebase:', error.message);
                        console.error('🔍 كود الخطأ:', error.code);
                        
                        if (error.code === 'permission-denied') {
                            console.log('🔒 المشكلة: قواعد Firebase تحتاج إلى ضبط');
                            console.log('🛠️ الحل: اذهب إلى Firebase Console → Firestore Database → Rules');
                            console.log('📝 غير القواعد إلى:');
                            console.log(`
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /{document=**} {
      allow read, write: if true;
    }
  }
}`);
                        } else if (error.code === 'unavailable') {
                            console.log('🌐 مشكلة في الاتصال بالإنترنت أو خدمة Firebase');
                        }
                        
                        unsubscribe();
                    }
                );
                
                return true;
            } catch (error) {
                console.error('❌ خطأ في الاختبار:', error.message);
                return false;
            }
        }

        // Function to add a test course
        async function addTestCourse() {
            console.log('🧪 إضافة مادة تجريبية...');
            
            if (!window.db || !window.coursesCollection) {
                console.error('❌ Firebase غير مهيأ بشكل صحيح');
                return false;
            }
            
            try {
                const testCourse = {
                    title: 'مادة تجريبية',
                    description: 'هذه مادة تجريبية لاختبار Firebase',
                    credits: 3,
                    major: 'CS',
                    level: 3,
                    resources: [],
                    isUserAdded: true,
                    timestamp: firebase.firestore.FieldValue.serverTimestamp(),
                    addedBy: 'test-user',
                    status: 'active'
                };
                
                const docRef = await window.coursesCollection.add(testCourse);
                console.log('✅ تم إضافة المادة التجريبية بنجاح! ID:', docRef.id);
                console.log('🔄 تحديث قائمة المواد...');
                
                // إعادة تحميل المواد لعرض التحديث
                if (typeof loadCoursesFromFirebase === 'function') {
                    loadCoursesFromFirebase();
                }
                
                return true;
            } catch (error) {
                console.error('❌ فشل في إضافة المادة التجريبية:', error.message);
                console.error('🔍 كود الخطأ:', error.code);
                
                if (error.code === 'permission-denied') {
                    console.log('🔒 يجب ضبط قواعد Firebase أولاً');
                }
                
                return false;
            }
        }

        // Function to check Firebase data
        async function checkFirebaseData() {
            console.log('📊 فحص بيانات Firebase...');
            try {
                const snapshot = await coursesCollection.get();
                console.log('📄 إجمالي المواد في Firebase:', snapshot.size);
                
                snapshot.forEach(doc => {
                    const data = doc.data();
                    console.log('📚 مادة:', data.title, '- التخصص:', data.major);
                });
                
                return snapshot.size;
            } catch (error) {
                console.error('❌ فشل في قراءة البيانات:', error.message);
                return 0;
            }
        }

        // Debug functions available in console
        window.testFirebaseConnection = testFirebaseConnection;
        window.addTestCourse = addTestCourse;
        window.checkFirebaseData = checkFirebaseData;
        
        // دالة سهلة لاختبار Firebase
        window.testFirebase = function() {
            console.log('🚀 بدء اختبار Firebase الشامل...');
            testFirebaseConnection();
        };
        
        // دالة سهلة لإضافة مادة
        window.addCourse = function() {
            console.log('📚 إضافة مادة تجريبية...');
            addTestCourse();
        };
        
        // Test on page load
        window.addEventListener('load', () => {
            setTimeout(() => {
                console.log('📱 جاهز للاختبار! استخدم الأوامر التالية:');
                console.log('🧪 testFirebase() - لاختبار الاتصال');
                console.log('📚 addCourse() - لإضافة مادة تجريبية');
                console.log('📊 checkFirebaseData() - لفحص البيانات');
            }, 2000);
        });
    </script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        cosmic: '#0F0F1A',
                        midnight: '#1A1A2E',
                        nebula: '#2D2D4D',
                        stardust: '#E0E0FF',
                        plasma: '#6C63FF',
                        quantum: '#4D44DB',
                        photon: '#A5A6FF',
                        aurora: '#00D1B2',
                        supernova: '#FF8E3C',
                    },
                    fontFamily: {
                        inter: ['Inter', 'sans-serif'],
                        playfair: ['Playfair Display', 'serif'],
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'fade-in': 'fadeIn 0.8s ease-out forwards',
                        'gradient-x': 'gradientX 15s ease infinite',
                        'spin': 'spin 1s linear infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-20px)' },
                        },
                        fadeIn: {
                            '0%': { opacity: '0', transform: 'translateY(20px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        },
                        gradientX: {
                            '0%, 100%': { 'background-position': '0% 50%' },
                            '50%': { 'background-position': '100% 50%' },
                        },
                        spin: {
                            '0%': { transform: 'rotate(0deg)' },
                            '100%': { transform: 'rotate(360deg)' },
                        }
                    }
                }
            }
        }
    </script>
    <style type="text/css">
        /* CSS Reset to fix spacing issues */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            overflow-x: hidden;
        }

        :root {
            --primary: #0F0F1A;
            --secondary: #1A1A2E;
            --accent: #6C63FF;
            --text: #E0E0FF;
            /* Tailwind custom colors for buttons */
            --plasma: #ec4899;
            --aurora: #8b5cf6;
            --stardust: #c4b5fd;
            --photon: #a78bfa;
            --nebula: #1e1b4b;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--primary);
            color: var(--text);
            min-height: 100vh;
            scroll-behavior: smooth;
        }
        
        .gradient-text {
            background: linear-gradient(90deg, var(--accent) 0%, #A5A6FF 50%, #00D1B2 100%);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            background-size: 200% auto;
            animation: gradientX 8s ease infinite;
        }

        .glass-card {
            background: rgba(26, 26, 46, 0.6);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(109, 99, 255, 0.2);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .glass-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
            border-color: rgba(109, 99, 255, 0.3);
        }

        /* Centered icon squares */
        .icon-bg{ background:#e8e8e8; border:1px solid #e8e8e8; box-shadow:0 4px 8px rgba(0,0,0,.1); padding:0; position:relative; overflow:hidden; }
        .icon-bg i{ line-height:1; transform:none !important; }

        .glow-border {
            position: relative;
        }

        .glow-border::after {
            display: none;
        }
        
        
        .cta-button {
          display: inline-flex;
          align-items: center;
          justify-content: center;
          transition: all 0.2s ease-in;
          position: relative;
          overflow: hidden;
          z-index: 1;
          color: #090909;
          padding: 0.7em 1.7em;
          cursor: pointer;
          font-size: 18px;
          border-radius: 0.5em;
          background: #e8e8e8;
          border: 1px solid #e8e8e8;
          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
          font-weight: 500;
          margin: 0 8px;
        }

        .cta-button:active {
          color: #666;
          box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .cta-button:before {
          content: "";
          position: absolute;
          left: 50%;
          transform: translateX(-50%) scaleY(1) scaleX(1.25);
          top: 100%;
          width: 140%;
          height: 180%;
          background-color: rgba(0, 0, 0, 0.05);
          border-radius: 50%;
          display: block;
          transition: all 0.5s 0.1s cubic-bezier(0.55, 0, 0.1, 1);
          z-index: -1;
        }

        .cta-button:after {
          content: "";
          position: absolute;
          left: 55%;
          transform: translateX(-50%) scaleY(1) scaleX(1.45);
          top: 180%;
          width: 160%;
          height: 190%;
          background-color: #009087;
          border-radius: 50%;
          display: block;
          transition: all 0.5s 0.1s cubic-bezier(0.55, 0, 0.1, 1);
          z-index: -1;
        }

        .cta-button:hover {
          color: #ffffff;
          border: 1px solid #009087;
        }

        .cta-button:hover:before {
          top: -35%;
          background-color: #009087;
          transform: translateX(-50%) scaleY(1.3) scaleX(0.8);
        }

        .cta-button:hover:after {
          top: -45%;
          background-color: #009087;
          transform: translateX(-50%) scaleY(1.3) scaleX(0.8);
        }

       
.gradient-bg {
  display: inline-block;
  transition: all 0.2s ease-in;
  position: relative;
  overflow: hidden;
  z-index: 1;
  color: #090909;
  padding: 0.7em 1.7em;
  cursor: pointer;
  font-size: 18px;
  border-radius: 0.5em;
  background: #e8e8e8;
  border: 1px solid #e8e8e8;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
}

.gradient-bg:active {
  color: #666;
  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
}

.gradient-bg:before {
  content: "";
  position: absolute;
  left: 50%;
  transform: translateX(-50%) scaleY(1) scaleX(1.25);
  top: 100%;
  width: 140%;
  height: 180%;
  background-color: rgba(0, 0, 0, 0.05);
  border-radius: 50%;
  display: block;
  transition: all 0.5s 0.1s cubic-bezier(0.55, 0, 0.1, 1);
  z-index: -1;
}

.gradient-bg:after {
  content: "";
  position: absolute;
  left: 55%;
  transform: translateX(-50%) scaleY(1) scaleX(1.45);
  top: 180%;
  width: 160%;
  height: 190%;
  background-color: #009087;
  border-radius: 50%;
  display: block;
  transition: all 0.5s 0.1s cubic-bezier(0.55, 0, 0.1, 1);
  z-index: -1;
}

.gradient-bg:hover {
  color: #ffffff;
  border: 1px solid #009087;
}

.gradient-bg:hover:before {
  top: -35%;
  background-color: #009087;
  transform: translateX(-50%) scaleY(1.3) scaleX(0.8);
}

.gradient-bg:hover:after {
  top: -45%;
  background-color: #009087;
  transform: translateX(-50%) scaleY(1.3) scaleX(0.8);
}

        
        .hero-gradient {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 50%, #2D2D4D 100%);
            background-size: 200% 200%;
            animation: gradientX 15s ease infinite;
        }
        
        .course-card {
            background: linear-gradient(145deg, var(--secondary) 0%, #2D2D4D 100%);
            border: 1px solid rgba(109, 99, 255, 0.1);
            transition: all 0.3s ease;
            min-height: 350px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .course-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 20px rgba(108, 99, 255, 0.15);
            border-color: rgba(109, 99, 255, 0.2);
        }
        
        .video-thumbnail {
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.1);
        }
        
        .video-thumbnail:hover {
            transform: scale(1.03);
            box-shadow: 0 10px 25px rgba(108, 99, 255, 0.3);
        }
        
        .social-icon {
            transition: all 0.3s ease;
        }
        
        .social-icon:hover {
            transform: translateY(-3px) scale(1.1);
        }
        
        .nav-link {
            position: relative;
        }
        
        .nav-link::after {
            content: '';
            position: absolute;
            width: 0;
            height: 2px;
            bottom: 0;
            left: 0;
            background: linear-gradient(90deg, var(--accent) 0%, #00D1B2 100%);
            transition: width 0.4s ease;
        }
        
        .nav-link:hover::after {
            width: 100%;
        }
        
        .scrollbar-hide::-webkit-scrollbar {
            display: none;
        }
        
        .scrollbar-hide {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        
        .floating {
            animation: float 6s ease-in-out infinite;
        }
        
        .pattern-overlay {
            background-image: radial-gradient(rgba(109, 99, 255, 0.15) 1px, transparent 1px);
            background-size: 20px 20px;
        }
        
        
.input-wrapper {
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
  max-width: 300px;
  margin: 0 auto;
}

.input {
  border-style: none;
  height: 50px;
  width: 50px;
  padding: 10px;
  outline: none;
  border-radius: 50%;
  transition: all 500ms cubic-bezier(0, 0.110, 0.35, 2);
  background-color: #7e4fd4;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
  padding-right: 40px;
  color: #c5b5b5;
  position: relative;
  z-index: 1;
}

.input::placeholder,
.input {
  font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
  font-size: 17px;
}

.input::placeholder {
  color: #8f8f8f;
}

.icon {
  display: flex;
  align-items: center;
  justify-content: center;
  position: absolute;
  right: 50%;
  transform: translateX(50%);
  cursor: pointer;
  width: 25px;
  height: 25px;
  outline: none;
  border-style: none;
  border-radius: 50%;
  background-color: transparent;
  transition: all 500ms cubic-bezier(0, 0.110, 0.35, 2);
  z-index: 2;
  pointer-events: auto;
}

.icon:hover {
  background-color: rgba(255, 255, 255, 0.1);
}

.input:focus {
  box-shadow: none;
  width: 250px;
  border-radius: 0px;
  background-color: transparent;
  border-bottom: 3px solid #7e4fd4;
}

.input.expanded {
  width: 250px;
  border-radius: 0px;
  background-color: transparent;
  border-bottom: 3px solid #7e4fd4;
  box-shadow: none;
}



        
        .modern-card {
            width: 252px;
            height: 265px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            margin: 8px auto;
            overflow: hidden;
            position: relative;
            border: 1px solid #e5e7eb;
        }

        .modern-img {
            width: 100%;
            height: 50%;
            border-top-left-radius: 20px;
            border-top-right-radius: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: flex-start;
            justify-content: flex-end;
        }

        .modern-save {
            transition: all 0.3s ease;
            border-radius: 8px;
            margin: 16px;
            width: 28px;
            height: 28px;
            background-color: rgba(255, 255, 255, 0.95);
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
        }

        .modern-text {
            margin: 20px;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            height: calc(50% - 40px);
            justify-content: space-between;
        }

        .modern-save .svg {
            transition: all 0.3s ease;
            width: 14px;
            height: 14px;
            fill: #6b7280;
        }

        .modern-icon-box {
            margin-top: 12px;
            width: 85%;
            padding: 8px 12px;
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: flex-start;
            transition: all 0.3s ease;
        }

        .modern-icon-box svg {
            width: 17px;
            height: 17px;
        }

        .modern-text .h3 {
            font-family: 'Inter', 'Lucida Sans', sans-serif;
            font-size: 15px;
            font-weight: 600;
            color: #1f2937;
            margin: 0;
            line-height: 1.3;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .modern-text .p {
            font-family: 'Inter', 'Lucida Sans', sans-serif;
            color: #64748b;
            font-size: 12px;
            margin: 5px 0 0 0;
        }

        .modern-icon-box .span {
            margin-left: 8px;
            font-family: 'Inter', 'Lucida Sans', sans-serif;
            font-size: 12px;
            font-weight: 500;
            color: #475569;
        }

        .modern-card:hover {
            cursor: pointer;
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15);
            transform: translateY(-2px);
        }

        .modern-save:hover {
            transform: scale(1.05);
            background-color: #ffffff;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.12);
        }

        .modern-save:hover .svg {
            fill: #4b5563;
        }

        .modern-icon-box:hover {
            background: #f1f5f9;
            border-color: #cbd5e1;
        }

        .resource-card {
            background: rgba(45, 45, 77, 0.4);
            border-radius: 12px;
            padding: 16px;
            transition: all 0.3s ease;
            min-height: 80px;
        }
        
        .resource-card:hover {
            background: rgba(45, 45, 77, 0.7);
            transform: translateY(-3px);
        }

        /* Mobile Responsive Styles for Resource Cards */
        @media (max-width: 768px) {
            .modern-card {
                transform: scale(0.95);
            }
            
            .modern-card:hover {
                transform: scale(0.98);
            }
            
            /* Telegram Card Mobile */
            .resource-card.telegram-card {
                padding: 12px;
                border-radius: 16px;
            }
            
            .resource-card.telegram-card h3 {
                font-size: 16px;
            }
            
            /* Blackboard Card Mobile */
            .resource-card.blackboard-card {
                padding: 12px;
                border-radius: 8px;
            }
            
            .resource-card.blackboard-card h3 {
                font-size: 16px;
            }
            
            /* Drive Card Mobile */
            .resource-card.drive-card {
                padding: 12px;
                border-radius: 8px;
            }
            
            .resource-card.drive-card h3 {
                font-size: 16px;
            }
            
            /* Mega Card Mobile */
            .resource-card.mega-card {
                padding: 12px;
                border-radius: 12px;
            }
            
            .resource-card.mega-card h3 {
                font-size: 16px;
            }
            
            /* Default Card Mobile */
            .resource-card.default-card {
                padding: 12px;
                border-radius: 8px;
            }
            
            .resource-card.default-card h3 {
                font-size: 16px;
            }
        }
        
        .level-badge {
            position: absolute;
            top: 15px;
            left: 15px;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            z-index: 15;
            color: white;
        }
        
        .level-badge.level-3 {
            background: linear-gradient(135deg, #6C63FF 0%, #4D44DB 100%);
        }
        
        .level-badge.level-4 {
            background: linear-gradient(135deg, #00D1B2 0%, #00B39E 100%);
        }
        
        .level-badge.level-5 {
            background: linear-gradient(135deg, #FF8E3C 0%, #FF6E00 100%);
        }
        
        .level-badge.level-6 {
            background: linear-gradient(135deg, #A5A6FF 0%, #7C7CFD 100%);
        }
        
        .level-badge.level-7 {
            background: linear-gradient(135deg, #FF66C4 0%, #E84CA0 100%);
        }
        
        .level-badge.level-8 {
            background: linear-gradient(135deg, #00D1B2 0%, #6C63FF 100%);
        }
        
        .search-icon {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text);
            opacity: 0.6;
        }
        
        #loading-bar {
            position: absolute;
            bottom: 0;
            left: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--accent) 0%, #00D1B2 100%);
            width: 0%;
            transition: width 0.3s;
        }
        
        .search-results-highlight {
            background-color: rgba(108, 99, 255, 0.3);
            color: white;
            padding: 0 2px;
            border-radius: 3px;
        }
        
        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: var(--accent);
            animation: spin 1s ease-in-out infinite;
            margin-right: 10px;
            vertical-align: middle;
        }
        

.animated-text-container {
  /* color used to softly clip top and bottom of the .animated-words container */
  background-color: hidden;
  padding: 1rem 2rem;
  border-radius: 1.25rem;
}
.animated-text-display {
  color: rgb(124, 124, 124);
  font-family: "Poppins", sans-serif;
  font-weight: 500;
  font-size: 25px;
  -webkit-box-sizing: content-box;
  box-sizing: content-box;
  height: 40px;
  padding: 10px 10px;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  border-radius: 8px;
}

.animated-words {
  overflow: hidden;
  position: relative;
}
.animated-words::after {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(
    var(--bg-color) 10%,
    transparent 30%,
    transparent 70%,
    var(--bg-color) 90%
  );
  z-index: 20;
}

.animated-word {
  display: block;
  height: 100%;
  padding-left: 6px;
  color: #956afa;
  animation: word-rotate 4s infinite;
}

@keyframes word-rotate {
  10% {
    -webkit-transform: translateY(-102%);
    transform: translateY(-102%);
  }

  25% {
    -webkit-transform: translateY(-100%);
    transform: translateY(-100%);
  }

  35% {
    -webkit-transform: translateY(-202%);
    transform: translateY(-202%);
  }

  50% {
    -webkit-transform: translateY(-200%);
    transform: translateY(-200%);
  }

  60% {
    -webkit-transform: translateY(-302%);
    transform: translateY(-302%);
  }

  75% {
    -webkit-transform: translateY(-300%);
    transform: translateY(-300%);
  }

  85% {
    -webkit-transform: translateY(-402%);
    transform: translateY(-402%);
  }

  100% {
    -webkit-transform: translateY(-400%);
    transform: translateY(-400%);
  }
}

 
ul {
  list-style: none;
}

.social-icons {
  display: flex;
  justify-content: center;
  align-items: center;
}
.social-icons .icon-content {
  margin: 0 10px;
  position: relative;
}
.social-icons .icon-content .tooltip {
  position: absolute;
  top: -30px;
  left: 50%;
  transform: translateX(-50%);
  color: #fff;
  padding: 6px 10px;
  border-radius: 5px;
  opacity: 0;
  visibility: hidden;
  font-size: 14px;
  transition: all 0.3s ease;
}
.social-icons .icon-content:hover .tooltip {
  opacity: 1;
  visibility: visible;
  top: -50px;
}
.social-icons .icon-content a {
  position: relative;
  overflow: hidden;
  display: flex;
  justify-content: center;
  align-items: center;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  color: #4d4d4d;
  background-color: #fff;
  transition: all 0.3s ease-in-out;
}
.social-icons .icon-content a:hover {
  box-shadow: 3px 2px 45px 0px rgb(0 0 0 / 12%);
}
.social-icons .icon-content a svg {
  position: relative;
  z-index: 1;
  width: 30px;
  height: 30px;
}
.social-icons .icon-content a:hover {
  color: white;
}
.social-icons .icon-content a .filled {
  position: absolute;
  top: auto;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 0;
  background-color: #000;
  transition: all 0.3s ease-in-out;
}
.social-icons .icon-content a:hover .filled {
  height: 100%;
}

.social-icons .icon-content a[data-social="linkedin"] .filled,
.social-icons .icon-content a[data-social="linkedin"] ~ .tooltip {
  background-color: #0274b3;
}

.social-icons .icon-content a[data-social="github"] .filled,
.social-icons .icon-content a[data-social="github"] ~ .tooltip {
  background-color: #24262a;
}
.social-icons .icon-content a[data-social="instagram"] .filled,
.social-icons .icon-content a[data-social="instagram"] ~ .tooltip {
  background: linear-gradient(
    45deg,
    #405de6,
    #5b51db,
    #b33ab4,
    #c135b4,
    #e1306c,
    #fd1f1f
  );
}
.social-icons .icon-content a[data-social="youtube"] .filled,
.social-icons .icon-content a[data-social="youtube"] ~ .tooltip {
  background-color: #ff0000;
}
.social-icons .icon-content a[data-social="telegram"] .filled,
.social-icons .icon-content a[data-social="telegram"] ~ .tooltip {
  background-color: #0088cc;
}

.gradient-bg-original {
            background: linear-gradient(135deg, var(--accent) 0%, #00D1B2 100%);
            transition: all 0.3s ease;
        }
        
        .gradient-bg-original:hover {
            background: linear-gradient(135deg, #4D44DB 0%, #00B39E 100%);
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(108, 99, 255, 0.3);
        }

        /* Mobile Menu Styles */
        #mobile-menu {
            transition: all 0.3s ease;
            transform: translateY(-10px);
            opacity: 0;
        }

        #mobile-menu:not(.hidden) {
            transform: translateY(0);
            opacity: 1;
        }

        /* Form Styles */
        .resource-input {
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Mobile Theme Toggle */
        .theme-toggle:checked + div {
            background-color: var(--accent);
        }

        .theme-toggle:checked + div > div {
            transform: translateX(24px);
        }

        /* Success Animation */
        .success-message {
            animation: successPulse 2s ease-in-out;
        }

        @keyframes successPulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.8; transform: scale(1.05); }
        }

        /* Responsive Form */
        @media (max-width: 768px) {
            .resource-input {
                flex-direction: column;
                gap: 12px;
            }
            
            .resource-input select,
            .resource-input input {
                width: 100%;
            }
        }

        /* Enhanced Modal Animations */
        .modal-enter {
            animation: modalEnter 0.3s ease-out;
        }

        @keyframes modalEnter {
            from {
                opacity: 0;
                transform: scale(0.95) translateY(-20px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        /* Theme Toggle Button Styles (modern switch like index.html) */
        #theme-toggle-button {
            font-size: 16px;
            position: relative;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 6px 10px;
            border-radius: 9999px;
            border: 1px solid rgba(224,224,255,.25);
            background: linear-gradient(180deg, rgba(108,99,255,.12), rgba(108,99,255,.06));
            backdrop-filter: blur(6px);
            cursor: pointer;
            margin-left: 16px;
            box-shadow: 0 4px 14px rgba(0,0,0,.15);
            user-select: none;
        }

        #toggle {
            opacity: 0;
            width: 0;
            height: 0;
        }

        /* Switch visuals */
        #theme-toggle-button .toggle {
            position: relative;
            width: 60px;
            height: 32px;
            border-radius: 9999px;
            background: #83cbd8;
            transition: background .25s ease;
            border: 1px solid rgba(0,0,0,.08);
        }
        #theme-toggle-button .knob {
            position: absolute;
            top: 3px;
            left: 3px;
            width: 26px;
            height: 26px;
            border-radius: 50%;
            background: #fff;
            box-shadow: 0 4px 10px rgba(0,0,0,.18);
            transition: transform .25s ease;
        }
        #theme-toggle-button .icon {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            font-size: 14px;
            opacity: .9;
            pointer-events: none;
        }
        #theme-toggle-button .icon.sun { left: 10px; }
        #theme-toggle-button .icon.moon { right: 10px; opacity: .4; }
        #toggle:checked + .toggle { background: #2b4360; }
        #toggle:checked + .toggle .knob { transform: translateX(28px); }
        #toggle:checked + .toggle .icon.sun { opacity: .35; }
        #toggle:checked + .toggle .icon.moon { opacity: .95; }

        /* Light Mode Styles */
        body.light-mode {
            --primary: #dfe4eaca;
            --secondary: #dad0d0;
            --accent: #6366f1;
            --text: #000000;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 50%, #f1f5f9 100%);
            color: #000000;
            transition: all 0.3s ease;
        }

        body.light-mode .glass-card {
            background: rgba(233, 228, 228, 0.9);
            border: 1px solid rgba(92, 95, 221, 0.15);
            color: #1a202c;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
        }

        body.light-mode .course-card {
            background: linear-gradient(145deg, #e6e3e3db 0%, #d6d7d8 100%);
            border: 1px solid rgba(90, 93, 217, 0.15);
            color: #1a202c;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
        }

        body.light-mode .course-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 15px 35px rgba(99, 102, 241, 0.15);
            border-color: rgba(99, 102, 241, 0.2);
        }

        body.light-mode .hero-gradient {
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.95) 0%, 
                rgba(240, 249, 255, 0.95) 25%,
                rgba(224, 231, 255, 0.95) 50%,
                rgba(254, 243, 242, 0.95) 75%,
                rgba(241, 245, 249, 0.95) 100%);
            color: #1a202c;
        }

        body.light-mode .pattern-overlay {
            background-image: 
                radial-gradient(circle at 20% 80%, rgba(99, 102, 241, 0.03) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(139, 92, 246, 0.03) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(6, 182, 212, 0.03) 0%, transparent 50%);
        }

        body.light-mode .text-stardust {
            color: #000000 !important;
        }

        body.light-mode .text-white {
            color: #000000 !important;
        }

        body.light-mode h1, 
        body.light-mode h2, 
        body.light-mode h3, 
        body.light-mode h4,
        body.light-mode h5,
        body.light-mode h6 {
            color: #000000 !important;
        }

        body.light-mode p {
            color: #131212 !important;
        }

        body.light-mode .nav-link {
            color: #475569;
        }

        body.light-mode .nav-link:hover {
            color: #000000;
        }

        body.light-mode header {
            background: rgba(255, 255, 255, 0.9);
            border-bottom: 1px solid rgba(99, 102, 241, 0.1);
        }

        body.light-mode .backdrop-blur-lg {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(99, 102, 241, 0.15);
        }

        body.light-mode .modern-card {
            background: rgba(255, 255, 255, 0.98);
            border: 1px solid rgba(99, 102, 241, 0.1);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
        }

        body.light-mode .modern-save {
            background-color: rgba(255, 255, 255, 0.98);
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.15);
            border: 1px solid rgba(99, 102, 241, 0.1);
        }

        /* Light Mode Text Enhancement */
        body.light-mode .gradient-text {
            background: linear-gradient(135deg, #000000 0%, #7c3aed 50%, #0891b2 100%);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        body.light-mode .level-badge {
            background: rgba(99, 102, 241, 0.15);
            color: #4f46e5 !important;
            font-weight: 600;
        }

        /* Light mode adjustments for new buttons */
        body.light-mode .delete-tooltip-btn {
            background-color: rgba(239, 68, 68, 0.1);
        }

        body.light-mode .delete-tooltip-btn:hover {
            background-color: rgba(239, 68, 68, 0.15);
        }

        body.light-mode .mobile-edit-btn-new {
            background-color: rgba(59, 130, 246, 0.1);
        }

        body.light-mode .mobile-edit-btn-new:hover {
            background-color: rgba(59, 130, 246, 0.15);
        }

        body.light-mode .resource-delete-btn {
            background-color: rgba(239, 68, 68, 0.1);
        }

        body.light-mode .resource-delete-btn:hover {
            background-color: rgba(239, 68, 68, 0.15);
        }

        /* New Delete Button Design - From Uiverse.io by hannahyockel */
        .delete-tooltip-btn {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 1em;
            border: 0px solid transparent;
            background-color: rgba(239, 68, 68, 0.08);
            border-radius: 1.25em;
            transition: all 0.2s linear;
            position: relative;
            cursor: pointer;
            min-width: 44px;
            min-height: 44px;
        }

        .delete-tooltip-btn:hover {
            box-shadow: 3.4px 2.5px 4.9px rgba(239, 68, 68, 0.025),
                8.6px 6.3px 12.4px rgba(239, 68, 68, 0.035),
                17.5px 12.8px 25.3px rgba(239, 68, 68, 0.045),
                36.1px 26.3px 52.2px rgba(239, 68, 68, 0.055),
                99px 72px 143px rgba(239, 68, 68, 0.08);
            background-color: rgba(239, 68, 68, 0.12);
        }

        .delete-tooltip-btn svg {
            width: 25px;
            height: 25px;
            transition: all 0.2s ease;
        }

        .delete-tooltip-btn svg path {
            fill: #ef4444;
        }

        .delete-tooltip-btn:hover svg path {
            fill: #dc2626;
        }

        .delete-tooltiptext {
            visibility: hidden;
            width: 4em;
            background-color: rgba(0, 0, 0, 0.8);
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px 0;
            position: absolute;
            z-index: 1000;
            top: 25%;
            left: 110%;
            font-size: 12px;
            font-weight: 500;
        }

        .delete-tooltiptext::after {
            content: "";
            position: absolute;
            top: 50%;
            right: 100%;
            margin-top: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: transparent rgba(0, 0, 0, 0.8) transparent transparent;
        }

        .delete-tooltip-btn:hover .delete-tooltiptext {
            visibility: visible;
        }

        /* Resource delete button design */
        .resource-delete-btn {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 0.5em;
            border: 0px solid transparent;
            background-color: rgba(239, 68, 68, 0.08);
            border-radius: 0.75em;
            transition: all 0.2s linear;
            position: relative;
            cursor: pointer;
            min-width: 36px;
            min-height: 36px;
        }

        .resource-delete-btn:hover {
            box-shadow: 2px 1.5px 3px rgba(239, 68, 68, 0.025),
                5px 4px 8px rgba(239, 68, 68, 0.035),
                10px 8px 16px rgba(239, 68, 68, 0.045),
                20px 15px 30px rgba(239, 68, 68, 0.055),
                50px 36px 72px rgba(239, 68, 68, 0.08);
            background-color: rgba(239, 68, 68, 0.12);
        }

        .resource-delete-btn svg {
            width: 16px;
            height: 16px;
            transition: all 0.2s ease;
        }

        .resource-delete-btn svg path {
            fill: #ef4444;
        }

        .resource-delete-btn:hover svg path {
            fill: #dc2626;
        }

        .resource-delete-btn .resource-delete-tooltiptext {
            visibility: hidden;
            width: 3em;
            background-color: rgba(0, 0, 0, 0.8);
            color: #fff;
            text-align: center;
            border-radius: 4px;
            padding: 3px 0;
            position: absolute;
            z-index: 1000;
            top: -30px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 10px;
            font-weight: 500;
        }

        .resource-delete-btn:hover .resource-delete-tooltiptext {
            visibility: visible;
        }

        /* Enhanced mobile edit button to match new delete style */
        .mobile-edit-btn-new {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 1em;
            border: 0px solid transparent;
            background-color: rgba(59, 130, 246, 0.08);
            border-radius: 1.25em;
            transition: all 0.2s linear;
            position: relative;
            cursor: pointer;
            min-width: 44px;
            min-height: 44px;
        }

        .mobile-edit-btn-new:hover {
            box-shadow: 3.4px 2.5px 4.9px rgba(59, 130, 246, 0.025),
                8.6px 6.3px 12.4px rgba(59, 130, 246, 0.035),
                17.5px 12.8px 25.3px rgba(59, 130, 246, 0.045),
                36.1px 26.3px 52.2px rgba(59, 130, 246, 0.055),
                99px 72px 143px rgba(59, 130, 246, 0.08);
            background-color: rgba(59, 130, 246, 0.12);
        }

        .mobile-edit-btn-new .edit-tooltiptext {
            visibility: hidden;
            width: 4em;
            background-color: rgba(0, 0, 0, 0.8);
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px 0;
            position: absolute;
            z-index: 1000;
            top: 25%;
            left: 110%;
            font-size: 12px;
            font-weight: 500;
        }

        .mobile-edit-btn-new .edit-tooltiptext::after {
            content: "";
            position: absolute;
            top: 50%;
            right: 100%;
            margin-top: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: transparent rgba(0, 0, 0, 0.8) transparent transparent;
        }

        .mobile-edit-btn-new:hover .edit-tooltiptext {
            visibility: visible;
        }

        /* Responsive adjustments for new button design */
        @media (max-width: 768px) {
            .delete-tooltip-btn,
            .mobile-edit-btn-new {
                padding: 0.8em;
                min-width: 40px;
                min-height: 40px;
            }

            .delete-tooltip-btn svg,
            .mobile-edit-btn-new svg {
                width: 20px;
                height: 20px;
            }
        }

        @media (max-width: 480px) {
            .delete-tooltiptext,
            .mobile-edit-btn-new .edit-tooltiptext {
                left: -20px;
                top: -35px;
                width: 5em;
            }

            .delete-tooltiptext::after,
            .mobile-edit-btn-new .edit-tooltiptext::after {
                top: 100%;
                left: 50%;
                right: auto;
                margin-top: 0;
                margin-left: -5px;
                border-color: rgba(0, 0, 0, 0.8) transparent transparent transparent;
            }
        }

        /* Light mode adjustments for new buttons */
        .light-mode .delete-tooltip-btn {
            background-color: rgba(239, 68, 68, 0.1);
        }

        .light-mode .delete-tooltip-btn:hover {
            background-color: rgba(239, 68, 68, 0.15);
        }

        .light-mode .mobile-edit-btn-new {
            background-color: rgba(59, 130, 246, 0.1);
        }



        /* Mobile actions container - hidden by default */
        .mobile-actions-container {
            display: none;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .mobile-edit-btn,
            .mobile-delete-btn {
                padding: 10px 14px;
                font-size: 14px;
                min-height: 44px;
                margin-left: 6px;
            }

            /* Hide mobile actions container on desktop */
            .mobile-actions-container {
                display: none;
            }

            /* Stack buttons vertically on small screens */
            @media (max-width: 480px) {
                /* Hide desktop buttons on mobile */
                .desktop-btn {
                    display: none !important;
                }

                /* Show mobile actions container only on mobile */
                .mobile-actions-container {
                    display: flex !important;
                    flex-direction: row;
                    gap: 16px;
                    margin-top: 16px;
                    margin-bottom: 16px;
                    padding: 16px;
                    background-color: rgba(255, 255, 255, 0.05);
                    border-radius: 12px;
                    border: 1px solid rgba(255, 255, 255, 0.1);
                    justify-content: center;
                }

                /* Mobile modal adjustments */
                #courseModal .glass-card {
                    position: relative;
                    margin: 20px;
                    padding: 24px 20px;
                }

                /* Position close button in top-left corner - closer to modal */
                #courseModal .flex.items-center.gap-3 {
                    position: absolute;
                    top: 8px;
                    left: 8px;
                    z-index: 20;
                    border-radius: 50%;
                    width: 36px;
                    height: 36px;
                    justify-content: center;
                    align-items: center;
                    gap: 0;
                    padding: 0;
                    background: none;
                }

                /* Style the close button for mobile - no background */
                #courseModal .flex.items-center.gap-3 > button {
                    position: static !important;
                    margin: 0 !important;
                    padding: 8px !important;
                    background: none !important;
                    border: none !important;
                    border-radius: 50% !important;
                    color: white !important;
                    width: 36px;
                    height: 36px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    font-size: 18px;
                    font-weight: bold;
                }

                /* Course content adjustments */
                #courseModal .flex-1 {
                    padding-top: 24px;
                }

                /* Mobile button styling - EXACT COPY OF DESKTOP BUTTONS */
                .mobile-edit-btn {
                    display: flex;
                    flex-direction: column;
                    justify-content: center;
                    align-items: center;
                    padding: 1em;
                    border: 0px solid transparent;
                    background-color: rgba(59, 130, 246, 0.08);
                    border-radius: 1.25em;
                    transition: all 0.2s linear;
                    position: relative;
                    cursor: pointer;
                    min-width: 44px;
                    min-height: 44px;
                    margin-left: 8px;
                }

                .mobile-edit-btn:hover {
                    box-shadow: 3.4px 2.5px 4.9px rgba(59, 130, 246, 0.025),
                        8.6px 6.3px 12.4px rgba(59, 130, 246, 0.035),
                        17.5px 12.8px 25.3px rgba(59, 130, 246, 0.045),
                        36.1px 26.3px 52.2px rgba(59, 130, 246, 0.055),
                        99px 72px 143px rgba(59, 130, 246, 0.08);
                    background-color: rgba(59, 130, 246, 0.12);
                }

                .mobile-delete-btn {
                    display: flex;
                    flex-direction: column;
                    justify-content: center;
                    align-items: center;
                    padding: 1em;
                    border: 0px solid transparent;
                    background-color: rgba(239, 68, 68, 0.08);
                    border-radius: 1.25em;
                    transition: all 0.2s linear;
                    position: relative;
                    cursor: pointer;
                    min-width: 44px;
                    min-height: 44px;
                }

                .mobile-delete-btn:hover {
                    box-shadow: 3.4px 2.5px 4.9px rgba(239, 68, 68, 0.025),
                        8.6px 6.3px 12.4px rgba(239, 68, 68, 0.035),
                        17.5px 12.8px 25.3px rgba(239, 68, 68, 0.045),
                        36.1px 26.3px 52.2px rgba(239, 68, 68, 0.055),
                        99px 72px 143px rgba(239, 68, 68, 0.08);
                    background-color: rgba(239, 68, 68, 0.12);
                }

                .mobile-edit-btn svg,
                .mobile-delete-btn svg {
                    width: 25px;
                    height: 25px;
                    transition: all 0.2s ease;
                }

                .mobile-edit-btn svg path {
                    fill: #3b82f6;
                }

                .mobile-edit-btn:hover svg path {
                    fill: #2563eb;
                }

                .mobile-delete-btn svg path {
                    fill: #ef4444;
                }

                .mobile-delete-btn:hover svg path {
                    fill: #dc2626;
                }

                .mobile-action-btn-icon {
                    font-size: 20px;
                    opacity: 1;
                }

                /* Hide button text on mobile - icon only like desktop */
                .btn-text {
                    display: none;
                }

                /* Adjust container for circular buttons */
                .mobile-actions-container {
                    display: flex !important;
                    flex-direction: row;
                    gap: 16px;
                    margin-top: 16px;
                    margin-bottom: 16px;
                    padding: 16px;
                    background-color: rgba(255, 255, 255, 0.05);
                    border-radius: 12px;
                    border: 1px solid rgba(255, 255, 255, 0.1);
                    justify-content: center;
                }
            }

            .mobile-edit-btn,
            .mobile-delete-btn {
                    margin-left: 0;
                    margin-bottom: 0;
                    justify-content: center;
                    flex: 0 0 auto;
                    min-width: 44px;
                    max-width: none;
                    padding: 10px 16px;
                    border-radius: 12px;
                    font-size: 13px;
                }

                .mobile-edit-btn .btn-text,
                .mobile-delete-btn .btn-text {
                    display: inline;
                }

                .mobile-action-btn-icon {
                    font-size: 14px;
                }

                /* Ensure proper spacing for content */
                #courseModal .glass-card {
                    padding: 24px 20px 20px 20px;
                }

                /* Modal content sections spacing */
                #courseModal .mb-8 {
                    margin-bottom: 20px;
                }
            }

        /* Light mode adjustments for action buttons */
        body.light-mode .mobile-edit-btn {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.2);
        }

        body.light-mode .mobile-delete-btn {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            box-shadow: 0 4px 12px rgba(239, 68, 68, 0.2);
        }

        body.light-mode .mobile-edit-btn:hover {
            background: linear-gradient(135deg, #1d4ed8 0%, #1e40af 100%);
            box-shadow: 0 6px 16px rgba(59, 130, 246, 0.3);
        }

        body.light-mode .mobile-delete-btn:hover {
            background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
            box-shadow: 0 6px 16px rgba(239, 68, 68, 0.3);
        }

        /* Desktop view - hide mobile container, show desktop buttons */
        @media (min-width: 481px) {
            .mobile-actions-container {
                display: none !important;
            }
            
            .desktop-btn {
                display: inline-flex !important;
            }

            /* Remove black background from close button on desktop */
            #courseModal .flex.items-center.gap-3 {
                background: transparent !important;
                border-radius: 0 !important;
                position: static !important;
                width: auto !important;
                height: auto !important;
            }
        }
    </style>
    
    <!-- Mobile Course Cards Optimization -->
    <style>
        /* تحسين كروت المواد للجوال */
        @media (max-width: 768px) {
            .course-card {
                transform: scale(1) !important;
                padding: 1.5rem !important;
                margin-bottom: 1rem !important;
                background: linear-gradient(135deg, rgba(26, 31, 44, 0.15) 0%, rgba(40, 46, 69, 0.08) 100%) !important;
                border: 1px solid rgba(156, 163, 175, 0.15) !important;
                border-radius: 1rem !important;
                transition: all 0.4s ease !important;
            }
            
            .course-card:hover {
                transform: translateY(-2px) !important;
                border-color: rgba(156, 163, 175, 0.4) !important;
                box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2) !important;
            }
            
            .course-card .w-14 {
                width: 3rem !important;
                height: 3rem !important;
            }
            
            .course-card h3 {
                font-size: 1.125rem !important;
                line-height: 1.4 !important;
                margin-bottom: 0.75rem !important;
            }
            
            .course-card p {
                font-size: 0.875rem !important;
                line-height: 1.5 !important;
                margin-bottom: 1.25rem !important;
            }
            
            .level-badge {
                font-size: 0.75rem !important;
                padding: 0.25rem 0.75rem !important;
            }
            
            /* تحسين الشبكة للجوال */
            .grid {
                grid-template-columns: repeat(1, minmax(0, 1fr)) !important;
                gap: 1.25rem !important;
            }
            
            /* تحسين الأيقونات */
            .course-card i {
                font-size: 1.25rem !important;
            }
        }
        
        /* تأثيرات إضافية للجوال */
        @media (max-width: 640px) {
            .course-card {
                padding: 1.25rem !important;
                border-radius: 0.875rem !important;
            }
            
            .course-card h3 {
                font-size: 1rem !important;
            }
            
            .course-card p {
                font-size: 0.8125rem !important;
                margin-bottom: 1rem !important;
            }
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">
    <!-- Header -->
    <header class="backdrop-blur-lg bg-cosmic/90 border-b border-nebula/20 py-6 px-4 sticky top-0 z-50">
        <div class="container mx-auto">
            <div class="flex justify-between items-center">
                <!-- Logo/Title (clickable) -->
                <a href="../../../index.html" class="flex items-center cursor-pointer group">
                    <img src="../../assets/subject_search_logo.png" alt="Subject Search Logo" class="h-14 md:h-16 w-auto mr-4 group-hover:scale-105 transition-transform" onerror="this.style.display='none'; this.nextElementSibling.classList.remove('hidden');">
                    <div class="hidden w-14 h-14 rounded-full gradient-bg-original flex items-center justify-center mr-4 group-hover:scale-105 transition-transform">
                        <i class="fas fa-laptop-code text-white text-xl"></i>
                    </div>
                    <div>
                        <h1 class="text-2xl md:text-3xl font-bold font-playfair">
                            <span class="gradient-text" data-ar="جامعة SEU" data-en="SEU University"> جامعة SEU </span>
                        </h1>
                        <p class="text-stardust/70 mt-1 font-medium" data-ar="كلية العلوم الإدارية والمالية" data-en="College of Administrative and Financial Sciences">كلية العلوم الإدارية والمالية</p>
                    </div>
                </a>
                
                <!-- Desktop Navigation -->
                <nav class="hidden md:flex items-center space-x-6 space-x-reverse">
                    <a href="../../../index.html" class="text-stardust hover:text-white transition duration-300" data-ar="الرئيسية" data-en="Home">الرئيسية</a>
                    <a href="#cs" class="text-stardust hover:text-white transition duration-300" data-ar="إدارة الأعمال" data-en="Business Administration">إدارة الأعمال</a>
                    <a href="#ds" class="text-stardust hover:text-white transition duration-300" data-ar="المحاسبة" data-en="Accounting">المحاسبة</a>
                    <a href="#it" class="text-stardust hover:text-white transition duration-300" data-ar="الإدارة المالية" data-en="Financial Management">الإدارة المالية</a>
                    <a href="#ecommerce" class="text-stardust hover:text-white transition duration-300" data-ar="التجارة الإلكترونية" data-en="E-Commerce">التجارة الإلكترونية</a>
                    
                    <!-- User Authentication Section -->
                    <div class="flex items-center gap-3">
                        <!-- User Info (shown when logged in) -->
                        <div id="user-info" class="hidden flex items-center gap-3">
                            <div class="text-right">
                                <div class="text-white font-medium" id="user-name">اسم المستخدم</div>
                                <div class="text-stardust/70 text-sm">مسجل الدخول</div>
                            </div>
                            <button onclick="logout()" class="text-stardust hover:text-plasma transition duration-300">
                                <i class="fas fa-sign-out-alt text-lg"></i>
                            </button>
                        </div>
                        
                        <!-- Login Button (shown when not logged in) -->
                        <div id="login-section" class="flex items-center gap-3">
                            <button onclick="showLoginModal()" class="text-stardust hover:text-aurora transition duration-300 font-medium">
                                تسجيل الدخول
                            </button>
                            <button onclick="showRegisterModal()" class="bg-gradient-to-r from-plasma to-aurora text-white px-4 py-2 rounded-lg hover:scale-105 transition duration-300 text-sm font-semibold">
                                إنشاء حساب
                            </button>
                        </div>
                        
                        <!-- Add Course Button (only shown when logged in) -->
                        <button id="add-course-btn" onclick="openAddCourseModal()" class="hidden bg-gradient-to-r from-plasma to-aurora text-white px-4 py-2 rounded-lg hover:scale-105 transition duration-300 text-sm">
                            إضافة مادة
                        </button>
                    </div>
                    
                    <!-- Language Toggle Button (same style as index.html) -->
                    <button id="language-toggle" 
                            class="bg-gradient-to-r from-plasma/20 to-aurora/20 hover:from-plasma/30 hover:to-aurora/30 border border-stardust/30 hover:border-photon/50 text-white px-4 py-2 rounded-lg transition-all duration-300 flex items-center gap-2 font-medium text-sm" 
                            aria-label="Toggle language" 
                            title="تبديل اللغة / Switch Language">
                        <i class="fas fa-globe text-aurora"></i>
                        <span id="language-text" class="hidden sm:inline">العربية</span>
                    </button>
                    
                    <!-- Theme Toggle Button -->
                    <label for="toggle" id="theme-toggle-button" aria-label="Toggle theme">
                        <input type="checkbox" id="toggle">
                        <div class="toggle">
                            <span class="icon sun" aria-hidden="true">☀</span>
                            <span class="icon moon" aria-hidden="true">🌙</span>
                            <div class="knob" aria-hidden="true"></div>
                        </div>
                    </label>
                </nav>
                
                <!-- Mobile Menu Button -->
                <button id="mobile-menu-btn" class="md:hidden text-white p-2 hover:bg-nebula/30 rounded-lg transition duration-300">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </button>
            </div>
            
            <!-- Mobile Navigation Menu -->
            <div id="mobile-menu" class="md:hidden hidden mt-4 pb-4 border-t border-nebula/20 pt-4">
                <nav class="space-y-3" aria-label="قائمة التنقل الرئيسية">
                    <a href="../../../index.html" class="block text-stardust hover:text-white transition duration-300 py-2">الرئيسية</a>
                    <a href="#cs" class="block text-stardust hover:text-white transition duration-300 py-2">إدارة الأعمال</a>
                    <a href="#ds" class="block text-stardust hover:text-white transition duration-300 py-2">المحاسبة</a>
                    <a href="#it" class="block text-stardust hover:text-white transition duration-300 py-2">الإدارة المالية</a>
                    <a href="#ecommerce" class="block text-stardust hover:text-white transition duration-300 py-2">التجارة الإلكترونية</a>
                    
                    <!-- Mobile User Authentication Section -->
                    <div class="pt-3 border-t border-nebula/20">
                        <!-- User Info (shown when logged in) -->
                        <div id="mobile-user-info" class="hidden">
                            <div class="flex items-center justify-between py-2">
                                <div>
                                    <div class="text-white font-medium" id="mobile-user-name">اسم المستخدم</div>
                                    <div class="text-stardust/70 text-sm">مسجل الدخول</div>
                                </div>
                                <button onclick="logout(); toggleMobileMenu();" class="text-stardust hover:text-plasma transition duration-300">
                                    <i class="fas fa-sign-out-alt text-lg"></i>
                                </button>
                            </div>
                            <button onclick="openAddCourseModal(); toggleMobileMenu();" class="w-full bg-gradient-to-r from-plasma to-aurora text-white px-4 py-3 rounded-lg hover:scale-105 transition duration-300 mt-3">
                                إضافة مادة
                            </button>
                        </div>
                        
                        <!-- Login Button (shown when not logged in) -->
                        <div id="mobile-login-section">
                            <button onclick="showLoginModal(); toggleMobileMenu();" class="w-full text-stardust hover:text-aurora transition duration-300 font-medium py-2 text-right">
                                تسجيل الدخول
                            </button>
                            <button onclick="showRegisterModal(); toggleMobileMenu();" class="w-full bg-gradient-to-r from-plasma to-aurora text-white px-4 py-3 rounded-lg hover:scale-105 transition duration-300 mt-2">
                                إنشاء حساب
                            </button>
                        </div>
                    </div>
                    <!-- Mobile Language Toggle (same style as index.html) -->
                    <div class="pt-2 border-t border-nebula/10 mt-2">
                        <button id="mobile-language-toggle" 
                                class="w-full bg-gradient-to-r from-plasma/20 to-aurora/20 hover:from-plasma/30 hover:to-aurora/30 border border-stardust/30 hover:border-photon/50 text-white px-4 py-3 rounded-lg transition-all duration-300 flex items-center justify-center gap-2 font-medium text-sm"
                                aria-label="Toggle language">
                            <i class="fas fa-globe text-aurora"></i>
                            <span id="mobile-language-text">العربية / English</span>
                        </button>
                    </div>
                    <!-- Mobile Theme Toggle -->
                    <div class="pt-3">
                        <label for="toggle-mobile" class="flex items-center justify-between">
                            <span class="text-stardust">الوضع المظلم/الفاتح</span>
                            <input type="checkbox" id="toggle-mobile" class="sr-only theme-toggle">
                            <div class="relative w-12 h-6 bg-nebula rounded-full transition-colors duration-300">
                                <div class="absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full transition-transform duration-300 transform"></div>
                            </div>
                        </label>
                    </div>
                </nav>
            </div>
        </div>
    </header>

    <!-- Hero Section (matched to index style) -->
    <section class="relative text-white py-24 md:py-32 px-4 overflow-hidden hero-section">
        <style>
            /* Minimal hero styles reused from index */
            .hero-section{
              background: radial-gradient(80% 60% at 70% 65%, rgba(120,64,190,.25) 0%, rgba(120,64,190,0) 60%),
                          radial-gradient(70% 55% at 25% 30%, rgba(28,96,179,.25) 0%, rgba(28,96,179,0) 60%),
                          linear-gradient(135deg, #0b1220 0%, #0f1629 45%, #0b1220 100%);
            }
            .hero-heading{background:linear-gradient(180deg,#cfe0ff 0%,#a7c0ff 35%,#9bb5ff 60%,#9fb3ff 100%);-webkit-background-clip:text;background-clip:text;color:transparent}
            .badge-soft{background:rgba(59,130,246,.15);border:1px solid rgba(59,130,246,.25);color:#cfe0ff;padding:.4rem .9rem;border-radius:.75rem;font-weight:600;font-size:.9rem}
            .hero-search-wrap{max-width:820px;margin-inline:auto}
            .hero-search{height:64px;border-radius:9999px;width:100%;background:rgba(17,24,39,.55);border:1px solid rgba(255,255,255,.14);color:#e5e7eb;box-shadow:inset 0 1px 0 rgba(255,255,255,.04),0 6px 18px rgba(0,0,0,.35)}
            .hero-search::placeholder{color:rgba(229,231,235,.55)}
            .visually-hidden{position:absolute!important;left:-9999px!important;width:1px!important;height:1px!important;overflow:hidden!important;pointer-events:none!important}
        </style>
        <div class="absolute inset-0 pattern-overlay"></div>
        <div class="absolute top-0 left-0 w-1/3 h-full bg-gradient-to-r from-plasma/20 to-transparent"></div>
        <div class="floating absolute -top-20 -left-20 w-96 h-96 rounded-full bg-plasma/10 blur-3xl"></div>
        <div class="floating absolute -bottom-20 -right-20 w-96 h-96 rounded-full bg-aurora/10 blur-3xl"></div>

        <div class="container mx-auto relative z-10">
            <div class="max-w-5xl mx-auto text-center animate-fade-in">
                <div class="mb-5 flex items-center justify-center gap-3">
                    <span class="badge-soft">الجامعة السعودية الإلكترونية</span>
                </div>
                <h1 class="hero-heading text-4xl md:text-6xl font-extrabold tracking-tight leading-tight mb-4">
                    مواد كلية العلوم الإدارية والمالية
                </h1>
                <p class="text-lg md:text-xl text-stardust/80 mb-8 max-w-3xl mx-auto">
                    ابحث عن مواد إدارة الأعمال، المحاسبة، المالية، والتجارة الإلكترونية مع المصادر التعليمية
                </p>
                <div class="hero-search-wrap mb-4">
                    <div class="relative flex gap-3">
                        <div class="relative flex-1">
                            <i class="fas fa-search absolute top-1/2 -translate-y-1/2 right-6 text-white/60"></i>
                            <input id="heroSearchInput" type="text" placeholder="ابحث عن المواد الدراسية..." class="hero-search pr-12 pl-4 text-lg outline-none w-full"/>
                        </div>
                        <button onclick="performSearch()" class="bg-gradient-to-r from-aurora to-quantum text-white px-8 h-16 rounded-full hover:scale-105 transition-all duration-300 shadow-lg font-semibold flex items-center gap-2">
                            <i class="fas fa-search"></i>
                            بحث
                        </button>
                    </div>
                </div>
                <div class="flex justify-center mb-4">
                    <button type="button" onclick="toggleFilters()" class="h-12 px-8 rounded-xl flex items-center gap-2 border border-white/20 text-stardust hover:bg-white/10 transition">
                        <i class="fas fa-sliders-h"></i>
                        فلاتر البحث
                    </button>
                </div>
                <!-- Search Filters (moved into hero for correct placement) -->
                <div id="searchFilters" class="max-w-4xl mx-auto mb-2 hidden">
                    <div class="glass-card p-4 rounded-2xl">
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <!-- Major Filter -->
                            <div>
                                <label class="block text-white/80 text-sm mb-2">
                                    <i class="fas fa-building ml-1"></i>
                                    التخصص
                                </label>
                                <select id="majorFilter" class="w-full bg-nebula/50 border border-stardust/20 rounded-lg px-3 py-2 text-white outline-none focus:border-aurora transition">
                                    <option value="">جميع التخصصات</option>
                                    <option value="business-administration">إدارة الأعمال</option>
                                    <option value="accounting">المحاسبة</option>
                                    <option value="finance">الإدارة المالية</option>
                                    <option value="ecommerce">التجارة الإلكترونية</option>
                                </select>
                            </div>
                            <!-- Level Filter -->
                            <div>
                                <label class="block text-white/80 text-sm mb-2">
                                    <i class="fas fa-layer-group ml-1"></i>
                                    المستوى
                                </label>
                                <select id="levelFilter" class="w-full bg-nebula/50 border border-stardust/20 rounded-lg px-3 py-2 text-white outline-none focus:border-aurora transition">
                                    <option value="">جميع المستويات</option>
                                    <option value="1">المستوى الأول</option>
                                    <option value="2">المستوى الثاني</option>
                                    <option value="3">المستوى الثالث</option>
                                    <option value="4">المستوى الرابع</option>
                                    <option value="5">المستوى الخامس</option>
                                    <option value="6">المستوى السادس</option>
                                    <option value="7">المستوى السابع</option>
                                    <option value="8">المستوى الثامن</option>
                                </select>
                            </div>
                            <!-- Hours Filter -->
                            <div>
                                <label class="block text-white/80 text-sm mb-2">
                                    <i class="fas fa-clock ml-1"></i>
                                    الساعات
                                </label>
                                <select id="hoursFilter" class="w-full bg-nebula/50 border border-stardust/20 rounded-lg px-3 py-2 text-white outline-none focus:border-aurora transition">
                                    <option value="">جميع الساعات</option>
                                    <option value="2">ساعتان</option>
                                    <option value="3">3 ساعات</option>
                                    <option value="4">4 ساعات</option>
                                </select>
                            </div>
                        </div>
                        <div class="mt-4 flex gap-3 justify-center">
                            <button id="applyFiltersBtn" class="bg-gradient-to-r from-aurora to-quantum text-white px-6 py-2 rounded-lg hover:scale-105 transition">
                                <i class="fas fa-filter ml-2"></i>
                                تطبيق الفلاتر
                            </button>
                            <button id="clearFiltersBtn" class="bg-nebula/50 text-stardust px-6 py-2 rounded-lg hover:bg-nebula/70 transition">
                                <i class="fas fa-times ml-2"></i>
                                مسح الفلاتر
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script>
            // Bridge hero search to page search (Enter or button only)
            function performSearch(){
              const q=(document.getElementById('heroSearchInput')?.value||'').trim();
              if(!q){return;}
              const main=document.getElementById('courseSearch');
              if(main) main.value=q;
              if(typeof searchCourses==='function'){
                searchCourses();
                setTimeout(()=>{
                  const r=document.getElementById('search-results');
                  if(r && !r.classList.contains('hidden')){
                    const y=r.getBoundingClientRect().top+window.pageYOffset-100;
                    window.scrollTo({top:y,behavior:'smooth'});
                  }
                },150);
              }
            }
            document.addEventListener('DOMContentLoaded',()=>{
              const input=document.getElementById('heroSearchInput');
              if(!input) return;
              input.addEventListener('keypress',(e)=>{if(e.key==='Enter'){e.preventDefault();performSearch();}});
            });
                        function toggleFilters(){
                            const panel=document.getElementById('searchFilters');
                            if(!panel) return;
                            const willShow=panel.classList.contains('hidden');
                            panel.classList.toggle('hidden');
                            if(willShow){
                                setTimeout(()=>{
                                    const y=panel.getBoundingClientRect().top+window.pageYOffset-80;
                                    window.scrollTo({top:y,behavior:'smooth'});
                                },50);
                            }
                        }
        </script>
    </section>

    <!-- Majors Overview -->
    <main class="flex-grow container mx-auto py-16 px-4">
        <!-- Search Bar -->
        <div class="mb-16 animate-fade-in relative">
            <div class="input-wrapper visually-hidden">
                <input type="text" id="courseSearch" placeholder="ابحث عن المقررات بالكود (مثل CS 230)..." class="input" data-i18n-placeholder="searchCourseCodeExample">
                <button class="icon">
                    <i class="fas fa-search"></i>
                </button>
                <div id="loading-bar"></div>
            </div>
        </div>

        <!-- Search Filters moved into hero above -->

        <!-- Search Results Section -->

        <section id="search-results" class="hidden mb-24">
            <div class="flex items-center justify-between mb-12">
                <h2 class="text-4xl md:text-5xl font-bold font-playfair">
                    نتائج البحث: <span id="search-term-display" class="gradient-text"></span>
                </h2>
                <button onclick="clearSearch()" class="flex items-center text-photon hover:text-white transition duration-300">
                    <i class="fas fa-times mr-2"></i> مسح البحث
                </button>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="search-results-container">
                <!-- Search results will be populated here -->
            </div>
        </section>

        <!-- Business Administration Section -->
        <section id="cs" class="mb-24 animate-fade-in">
            <div class="flex flex-col md:flex-row items-start md:items-end justify-between mb-12">
                <div>
                    <span class="gradient-bg-original text-white text-xs font-bold px-3 py-1 rounded-full mb-3 inline-block">بكالوريوس</span>
                    <h2 class="text-4xl md:text-5xl font-bold font-playfair mb-4">
                        <span class="gradient-text">إدارة الأعمال</span>
                    </h2>
                    <p class="text-stardust/80 max-w-2xl text-lg">
                        تخصص يركز على إدارة المؤسسات والشركات، ويشمل دراسة الاستراتيجيات، الموارد البشرية، التسويق، وإدارة العمليات لتحقيق الأهداف التنظيمية بكفاءة.
                    </p>
                </div>
                <a href="javascript:void(0)" class="flex items-center text-photon hover:text-white mt-6 md:mt-0 transition duration-300" onclick="showAllCourses('business-administration')">
                    عرض جميع المواد <i class="fas fa-arrow-left ml-2"></i>
                </a>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- المواد ستظهر هنا عندما يضيفها المستخدمون -->
                <div class="col-span-full text-center py-12">
                    <div class="w-16 h-16 rounded-full bg-nebula/30 flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-plus text-stardust/50 text-xl"></i>
                    </div>
                    <p class="text-stardust/70 mb-4">لا توجد مواد في هذا التخصص بعد</p>
                    <button onclick="openAddCourseModal()" class="text-photon hover:text-white transition duration-300">
                        <i class="fas fa-plus mr-2"></i> إضافة أول مادة
                    </button>
                </div>
            </div>
        </section>
        
        <!-- Accounting Section -->
        <section id="ds" class="mb-24 animate-fade-in" style="animation-delay: 0.1s">
            <div class="flex flex-col md:flex-row items-start md:items-end justify-between mb-12">
                <div>
                    <span class="gradient-bg-original text-white text-xs font-bold px-3 py-1 rounded-full mb-3 inline-block">بكالوريوس</span>
                    <h2 class="text-4xl md:text-5xl font-bold font-playfair mb-4">
                        <span class="gradient-text">المحاسبة</span>
                    </h2>
                    <p class="text-stardust/80 max-w-2xl text-lg">
                        مجال يركز على تسجيل وتحليل وتفسير المعاملات المالية للمؤسسات، ويشمل المحاسبة المالية، محاسبة التكاليف، والمراجعة لضمان الشفافية المالية.
                    </p>
                </div>
                <a href="javascript:void(0)" class="flex items-center text-photon hover:text-white mt-6 md:mt-0 transition duration-300" onclick="showAllCourses('accounting')">
                    عرض جميع المواد <i class="fas fa-arrow-left ml-2"></i>
                </a>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- المواد ستظهر هنا عندما يضيفها المستخدمون -->
                <div class="col-span-full text-center py-12">
                    <div class="w-16 h-16 rounded-full bg-nebula/30 flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-plus text-stardust/50 text-xl"></i>
                    </div>
                    <p class="text-stardust/70 mb-4">لا توجد مواد في هذا التخصص بعد</p>
                    <button onclick="openAddCourseModal()" class="text-photon hover:text-white transition duration-300">
                        <i class="fas fa-plus mr-2"></i> إضافة أول مادة
                    </button>
                </div>
            </div>
        </section>
        
        <!-- Finance Section -->
        <section id="it" class="mb-24 animate-fade-in" style="animation-delay: 0.2s">
            <div class="flex flex-col md:flex-row items-start md:items-end justify-between mb-12">
                <div>
                    <span class="gradient-bg-original text-white text-xs font-bold px-3 py-1 rounded-full mb-3 inline-block">بكالوريوس</span>
                    <h2 class="text-4xl md:text-5xl font-bold font-playfair mb-4">
                        <span class="gradient-text">الإدارة المالية</span>
                    </h2>
                    <p class="text-stardust/80 max-w-2xl text-lg">
                        مجال يركز على إدارة الموارد المالية للمؤسسات، ويشمل التخطيط المالي، إدارة الاستثمارات، تحليل المخاطر، واتخاذ القرارات المالية الاستراتيجية.
                    </p>
                </div>
                <a href="javascript:void(0)" class="flex items-center text-photon hover:text-white mt-6 md:mt-0 transition duration-300" onclick="showAllCourses('finance')">
                    عرض جميع المواد <i class="fas fa-arrow-left ml-2"></i>
                </a>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- المواد ستظهر هنا عندما يضيفها المستخدمون -->
                <div class="col-span-full text-center py-12">
                    <div class="w-16 h-16 rounded-full bg-nebula/30 flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-plus text-stardust/50 text-xl"></i>
                    </div>
                    <p class="text-stardust/70 mb-4">لا توجد مواد في هذا التخصص بعد</p>
                    <button onclick="openAddCourseModal()" class="text-photon hover:text-white transition duration-300">
                        <i class="fas fa-plus mr-2"></i> إضافة أول مادة
                    </button>
                </div>
            </div>
        </section>
        
        <!-- E-commerce Section -->
        <section id="ecommerce" class="mb-24 animate-fade-in" style="animation-delay: 0.3s">
            <div class="flex flex-col md:flex-row items-start md:items-end justify-between mb-12">
                <div>
                    <span class="gradient-bg-original text-white text-xs font-bold px-3 py-1 rounded-full mb-3 inline-block">بكالوريوس</span>
                    <h2 class="text-4xl md:text-5xl font-bold font-playfair mb-4">
                        <span class="gradient-text">التجارة الإلكترونية</span>
                    </h2>
                    <p class="text-stardust/80 max-w-2xl text-lg">
                        مجال يركز على إدارة الأعمال التجارية الرقمية، ويشمل منصات التجارة الإلكترونية، التسويق الرقمي، الدفع الإلكتروني، وتطوير الأعمال عبر الإنترنت.
                    </p>
                </div>
                <button class="flex items-center text-photon hover:text-white mt-6 md:mt-0 transition duration-300" onclick="showAllCourses('e-commerce')">
                    عرض جميع المواد <i class="fas fa-arrow-left ml-2"></i>
                </button>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- المواد ستظهر هنا عندما يضيفها المستخدمون -->
                <div class="col-span-full text-center py-12">
                    <div class="w-16 h-16 rounded-full bg-nebula/30 flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-plus text-stardust/50 text-xl"></i>
                    </div>
                    <p class="text-stardust/70 mb-4">لا توجد مواد في هذا التخصص بعد</p>
                    <button onclick="openAddCourseModal()" class="text-photon hover:text-white transition duration-300">
                        <i class="fas fa-plus mr-2"></i> إضافة أول مادة
                    </button>
                </div>
            </div>
        </section>
        
        <!-- Overview Section -->
        <section id="overview" class="animate-fade-in relative overflow-hidden" style="animation-delay: 0.3s">
            <div class="glass-card rounded-3xl p-12 relative overflow-hidden">
                <!-- Background elements -->
                <div class="absolute -top-20 -left-20 w-80 h-80 rounded-full bg-plasma/10 blur-3xl"></div>
                <div class="absolute -bottom-20 -right-20 w-80 h-80 rounded-full bg-aurora/10 blur-3xl"></div>
                
                <div class="relative z-10">
                    <div class="text-center mb-16">
                        <span class="gradient-bg-original text-white text-xs font-bold px-3 py-1 rounded-full mb-4 inline-block">لماذا تختارنا</span>
                        <h2 class="text-4xl md:text-5xl font-bold font-playfair mb-6">
                            <span class="gradient-text">كلية رائدة في إعداد القادة</span>
                        </h2>
                        <p class="text-stardust/80 max-w-3xl mx-auto text-lg">
                            كلية العلوم الإدارية والمالية توفر تعليماً متميزاً يجمع بين النظرية والتطبيق العملي، مما يؤهل الطلاب لقيادة المؤسسات في عالم الأعمال المتطور.
                        </p>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                        <div class="glow-border bg-nebula/20 rounded-2xl p-8 group">
                            <div class="w-16 h-16 icon-bg rounded-xl flex items-center justify-center mb-6">
                                <i class="fas fa-chart-line text-white text-2xl"></i>
                            </div>
                            <h3 class="text-2xl font-bold text-white mb-4">إدارة الأعمال</h3>
                            <p class="text-stardust/70 mb-6">مجال يركز على إدارة المؤسسات والشركات، ويشمل دراسة الاستراتيجيات، الموارد البشرية، التسويق، وإدارة العمليات لتحقيق الأهداف التنظيمية بكفاءة.</p>
                            <a href="#cs" class="inline-flex items-center text-photon group-hover:text-white transition duration-300 font-medium">
                                تعرف أكثر <i class="fas fa-arrow-left ml-2 transition-transform duration-300 group-hover:-translate-x-1"></i>
                            </a>
                        </div>
                        
                        <div class="glow-border bg-nebula/20 rounded-2xl p-8 group">
                            <div class="w-16 h-16 icon-bg rounded-xl flex items-center justify-center mb-6">
                                <i class="fas fa-calculator text-white text-2xl"></i>
                            </div>
                            <h3 class="text-2xl font-bold text-white mb-4">المحاسبة</h3>
                            <p class="text-stardust/70 mb-6">مجال يركز على تسجيل وتحليل وتفسير المعاملات المالية للمؤسسات، ويشمل المحاسبة المالية، محاسبة التكاليف، والمراجعة لضمان الشفافية المالية.</p>
                            <a href="#ds" class="inline-flex items-center text-photon group-hover:text-white transition duration-300 font-medium">
                                تعرف أكثر <i class="fas fa-arrow-left ml-2 transition-transform duration-300 group-hover:-translate-x-1"></i>
                            </a>
                        </div>
                        
                        <div class="glow-border bg-nebula/20 rounded-2xl p-8 group">
                            <div class="w-16 h-16 icon-bg rounded-xl flex items-center justify-center mb-6">
                                <i class="fas fa-coins text-white text-2xl"></i>
                            </div>
                            <h3 class="text-2xl font-bold text-white mb-4">الإدارة المالية</h3>
                            <p class="text-stardust/70 mb-6">مجال يركز على إدارة الموارد المالية للمؤسسات، ويشمل التخطيط المالي، إدارة الاستثمارات، تحليل المخاطر، واتخاذ القرارات المالية الاستراتيجية.</p>
                            <a href="#it" class="inline-flex items-center text-photon group-hover:text-white transition duration-300 font-medium">
                                تعرف أكثر <i class="fas fa-arrow-left ml-2 transition-transform duration-300 group-hover:-translate-x-1"></i>
                            </a>
                        </div>
                        
                        <div class="glow-border bg-nebula/20 rounded-2xl p-8 group">
                            <div class="w-16 h-16 icon-bg rounded-xl flex items-center justify-center mb-6">
                                <i class="fas fa-shopping-cart text-white text-2xl"></i>
                            </div>
                            <h3 class="text-2xl font-bold text-white mb-4">التجارة الإلكترونية</h3>
                            <p class="text-stardust/70 mb-6">مجال يركز على إدارة الأعمال التجارية الرقمية، ويشمل منصات التجارة الإلكترونية، التسويق الرقمي، الدفع الإلكتروني، وتطوير الأعمال عبر الإنترنت.</p>
                            <a href="#ecommerce" class="inline-flex items-center text-photon group-hover:text-white transition duration-300 font-medium">
                                تعرف أكثر <i class="fas fa-arrow-left ml-2 transition-transform duration-300 group-hover:-translate-x-1"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer id="footer" class="bg-midnight border-t border-nebula/20 py-16 px-4">
        <div class="container mx-auto">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-12">
                <div>
                    <div class="flex items-center mb-6">
                        <div class="w-10 h-10 rounded-full gradient-bg flex items-center justify-center mr-3">
                            <i class="fas fa-chart-line text-white text-lg"></i>
                        </div>
                        <h3 class="text-xl font-bold font-playfair">
                            <span class="gradient-text">جامعة SEU</span>
                        </h3>
                    </div>
                    <p class="text-stardust/70 mb-6">
                        إعداد قادة الأعمال والمتخصصين الماليين للمساهمة في التنمية الاقتصادية.
                    </p>
                </div>
                
                <div>
                    <h4 class="text-lg font-bold text-white mb-6">البرامج</h4>
                    <ul class="space-y-3">
                        <li><a href="#cs" class="text-stardust/70 hover:text-photon transition duration-300">إدارة الأعمال</a></li>
                        <li><a href="#ds" class="text-stardust/70 hover:text-photon transition duration-300">المحاسبة</a></li>
                        <li><a href="#it" class="text-stardust/70 hover:text-photon transition duration-300">الإدارة المالية</a></li>
                        <li><a href="#ecommerce" class="text-stardust/70 hover:text-photon transition duration-300">التجارة الإلكترونية</a></li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="text-lg font-bold text-white mb-6">الموارد</h4>
                    <ul class="space-y-3">
                        <li><a href="#" class="text-stardust/70 hover:text-photon transition duration-300">طلاب افضل كلية </a></li>
                        <li><a href="../../../about.html" class="text-stardust/70 hover:text-photon transition duration-300">من نحن</a></li>
                        <li><a href="../../../privacy.html" class="text-stardust/70 hover:text-photon transition duration-300">سياسة الخصوصية</a></li>
                    </ul>
                </div>
                
                <div id="footer-group">
                    <h4 class="text-lg font-bold text-white mb-6">قروب الكلية</h4>
                    <ul class="space-y-3">
                        <li class="flex items-start">
                            <a href="https://t.me/Computing_and_Informatics" target="_blank" class="text-stardust/70 hover:text-photon transition duration-300">
                                قروب الكلية على تلجرام
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
            
            <div class="border-t border-nebula/20 mt-12 pt-8 flex flex-col md:flex-row justify-between items-center">
                <p class="text-stardust/50 text-sm mb-4 md:mb-0">
                    © 2025 كلية الحوسبة - جامعة SEU. جميع الحقوق محفوظة.
                </p>
            </div>
        </div>                <ul class="social-icons">
  <li class="icon-content">
    <a
      href="https://www.linkedin.com/in/turki-al-mutairi-1486b3244/"
      aria-label="LinkedIn"
      data-social="linkedin"
      target="_blank"
    >
      <div class="filled"></div>
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="16"
        height="16"
        fill="currentColor"
        class="bi bi-linkedin"
        viewBox="0 0 16 16"
        xml:space="preserve"
      >
        <path
          d="M0 1.146C0 .513.526 0 1.175 0h13.65C15.474 0 16 .513 16 1.146v13.708c0 .633-.526 1.146-1.175 1.146H1.175C.526 16 0 15.487 0 14.854zm4.943 12.248V6.169H2.542v7.225zm-1.2-8.212c.837 0 1.358-.554 1.358-1.248-.015-.709-.52-1.248-1.342-1.248S2.4 3.226 2.4 3.934c0 .694.521 1.248 1.327 1.248zm4.908 8.212V9.359c0-.216.016-.432.08-.586.173-.431.568-.878 1.232-.878.869 0 1.216.662 1.216 1.634v3.865h2.401V9.25c0-2.22-1.184-3.252-2.764-3.252-1.274 0-1.845.7-2.165 1.193v.025h-.016l.016-.025V6.169h-2.4c.03.678 0 7.225 0 7.225z"
          fill="currentColor"
        ></path>
      </svg>
    </a>
    <div class="tooltip">LinkedIn</div>
  </li>
  <li class="icon-content">
    <a href="https://github.com/turki013" aria-label="GitHub" data-social="github" , target="_blank">
      <div class="filled"></div>
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="16"
        height="16"
        fill="currentColor"
        class="bi bi-github"
        viewBox="0 0 16 16"
        xml:space="preserve"
      >
        <path
          d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27s1.36.09 2 .27c1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8"
          fill="currentColor"
        ></path>
      </svg>
    </a>
    <div class="tooltip">GitHub</div>
  </li>
  <li class="icon-content">
    <a
      href="https://web.telegram.org/k/#@Computing_and_Informatics"
      aria-label="Telegram"
      data-social="telegram"
      target="_blank"
    >
      <div class="filled"></div>
      <svg version="1.1" viewBox="0 0 100 100">
        <path
          d="M95,9.9c-1.3-1.1-3.4-1.2-7-0.1c0,0,0,0,0,0c-2.5,0.8-24.7,9.2-44.3,17.3c-17.6,7.3-31.9,13.7-33.6,14.5  c-1.9,0.6-6,2.4-6.2,5.2c-0.1,1.8,1.4,3.4,4.3,4.7c3.1,1.6,16.8,6.2,19.7,7.1c1,3.4,6.9,23.3,7.2,24.5c0.4,1.8,1.6,2.8,2.2,3.2  c0.1,0.1,0.3,0.3,0.5,0.4c0.3,0.2,0.7,0.3,1.2,0.3c0.7,0,1.5-0.3,2.2-0.8c3.7-3,10.1-9.7,11.9-11.6c7.9,6.2,16.5,13.1,17.3,13.9  c0,0,0.1,0.1,0.1,0.1c1.9,1.6,3.9,2.5,5.7,2.5c0.6,0,1.2-0.1,1.8-0.3c2.1-0.7,3.6-2.7,4.1-5.4c0-0.1,0.1-0.5,0.3-1.2  c3.4-14.8,6.1-27.8,8.3-38.7c2.1-10.7,3.8-21.2,4.8-26.8c0.2-1.4,0.4-2.5,0.5-3.2C96.3,13.5,96.5,11.2,95,9.9z M30,58.3l47.7-31.6  c0.1-0.1,0.3-0.2,0.4-0.3c0,0,0,0,0,0c0.1,0,0.1-0.1,0.2-0.1c0.1,0,0.1,0,0.2-0.1c-0.1,0.1-0.2,0.4-0.4,0.6L66,38.1  c-8.4,7.7-19.4,17.8-26.7,24.4c0,0,0,0,0,0.1c0,0-0.1,0.1-0.1,0.1c0,0,0,0.1-0.1,0.1c0,0.1,0,0.1-0.1,0.2c0,0,0,0.1,0,0.1  c0,0,0,0,0,0.1c-0.5,5.6-1.4,15.2-1.8,19.5c0,0,0,0,0-0.1C36.8,81.4,31.2,62.3,30,58.3z"
          fill="currentColor"
        ></path>
      </svg>
    </a>
    <div class="tooltip">Telegram</div>
  </li>
    </footer>

    <!-- Course Modal -->
    <div id="courseModal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 hidden">
        <div class="glass-card rounded-2xl p-8 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div class="flex flex-col sm:flex-row justify-between items-start mb-6 gap-4">
                <div class="flex-1">
                    <h2 id="modalCourseCode" class="text-3xl font-bold gradient-text mb-2"></h2>
                    <h3 id="modalCourseTitle" class="text-xl font-bold text-white"></h3>
                    <p class="text-stardust/70"><span id="modalCourseMajor"></span> • 3 ساعات</p>
                </div>
                <div class="flex items-center gap-3">
                    <button onclick="closeModal()" class="text-stardust hover:text-white text-2xl p-2 rounded-full hover:bg-nebula/30 transition duration-300">&times;</button>
                </div>
            </div>

            <div class="mb-8">
                <h3 class="text-xl font-bold text-white mb-3">وصف المادة</h3>
                <p id="modalCourseDesc" class="text-stardust/70 mb-6"></p>

                <div class="flex flex-wrap gap-3">
                    <a href="https://drive.google.com/drive/u/2/folders/171QmzC3gsixrvVAUKqi2AWA0RAYLgxZC" target="_blank" class="gradient-bg text-white py-2 px-6 rounded-full font-medium transition duration-300 inline-flex items-center">
                        <i class="fas fa-download mr-2"></i> تحميل المنهج
                    </a>
                    
                    <button onclick="shareCourse()" class="bg-gradient-to-r from-aurora to-plasma text-white py-2 px-6 rounded-full font-medium transition duration-300 inline-flex items-center hover:scale-105">
                        <i class="fas fa-share-alt mr-2"></i> مشاركة المادة
                    </button>
                </div>
            </div>

            <div class="mb-8">
                <h3 class="text-xl font-bold text-white mb-4">الموارد التعليمية</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 justify-items-center" id="course-resources">
                    <!-- Resources will be populated here -->
                </div>
            </div>

            <div class="mb-8">
                <h3 class="text-xl font-bold text-white mb-4">مواد إضافية</h3>
                <ul class="text-stardust/70 space-y-2">
                    <li class="flex items-center">
                        <i class="fas fa-book mr-2 text-photon"></i>
                        <a href="https://drive.google.com/drive/u/2/folders/171QmzC3gsixrvVAUKqi2AWA0RAYLgxZC" target="_blank" class="hover:text-white">كتاب مقرر موصى به</a>
                    </li>
                    <li class="flex items-center">
                        <i class="fas fa-link mr-2 text-photon"></i>
                        <a href="https://t.me/Computing_and_Informatics" target="_blank" class="hover:text-white">منصة التعلم التفاعلية</a>
                    </li>
                </ul>
            </div>
        </div>
    </div>

    <!-- All Courses Modal -->
    <div id="allCoursesModal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 hidden">
        <div class="glass-card rounded-2xl p-8 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-start mb-6">
                <div>
                    <h2 class="text-3xl font-bold gradient-text mb-2" id="allCoursesTitle"></h2>
                </div>
                <button onclick="closeAllCoursesModal()" class="text-stardust hover:text-white text-2xl">&times;</button>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8" id="allCoursesContainer">
                <!-- Courses will be populated here -->
            </div>
        </div>
    </div>

    <!-- Share Course Modal -->
    <div id="shareCourseModal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 hidden">
        <div class="glass-card rounded-2xl p-8 max-w-lg w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <div>
                    <h2 class="text-2xl font-bold text-white">مشاركة المادة</h2>
                    <p id="shareModalSubtitle" class="text-stardust/70 text-sm mt-1">شارك المادة مع الآخرين</p>
                </div>
                <button onclick="closeShareModal()" class="text-stardust hover:text-white text-2xl">&times;</button>
            </div>

            <div class="space-y-6">
                <!-- QR Code -->
                <div class="text-center p-4 bg-nebula/20 rounded-lg">
                    <h3 class="text-white font-medium mb-3">كود QR للوصول السريع</h3>
                    <div id="qrCodeContainer" class="flex justify-center mb-3">
                        <div class="loading-spinner"></div>
                    </div>
                    <p class="text-stardust/60 text-xs">امسح الكود للوصول المباشر للمادة</p>
                </div>

                <!-- Direct Link -->
                <div>
                    <label class="block text-white font-medium mb-2">
                        <i class="fas fa-link mr-2 text-aurora"></i>
                        الرابط المباشر للمادة
                    </label>
                    <div class="flex gap-2">
                        <input type="text" id="courseDirectLink" class="flex-1 bg-nebula/30 border border-stardust/20 rounded-lg px-3 py-2 text-white text-sm" readonly />
                        <button onclick="copyDirectLink()" class="bg-aurora hover:bg-plasma text-white px-4 py-2 rounded-lg transition duration-300 text-sm">
                            <span class="copy-btn-text">نسخ</span>
                        </button>
                    </div>
                </div>

                <!-- Website Link -->
                <div>
                    <label class="block text-white font-medium mb-2">
                        <i class="fas fa-globe mr-2 text-plasma"></i>
                        رابط الموقع مع تحديد المادة
                    </label>
                    <div class="flex gap-2">
                        <input type="text" id="courseWebsiteLink" class="flex-1 bg-nebula/30 border border-stardust/20 rounded-lg px-3 py-2 text-white text-sm" readonly />
                        <button onclick="copyWebsiteLink()" class="bg-plasma hover:bg-aurora text-white px-4 py-2 rounded-lg transition duration-300 text-sm">
                            <span class="copy-btn-text-2">نسخ</span>
                        </button>
                    </div>
                </div>

                <!-- Social Media Share -->
                <div>
                    <h3 class="text-white font-medium mb-3">
                        <i class="fas fa-share-alt mr-2 text-photon"></i>
                        مشاركة عبر وسائل التواصل
                    </h3>
                    <div class="grid grid-cols-2 gap-3">
                        <button onclick="shareOnWhatsApp()" class="bg-green-500 hover:bg-green-600 text-white p-3 rounded-lg transition duration-300 flex items-center justify-center gap-2">
                            <i class="fab fa-whatsapp text-lg"></i>
                            <span class="text-sm">واتساب</span>
                        </button>
                        <button onclick="shareOnTelegram()" class="bg-blue-500 hover:bg-blue-600 text-white p-3 rounded-lg transition duration-300 flex items-center justify-center gap-2">
                            <i class="fab fa-telegram text-lg"></i>
                            <span class="text-sm">تيليجرام</span>
                        </button>
                        <button onclick="shareOnTwitter()" class="bg-gray-800 hover:bg-gray-900 text-white p-3 rounded-lg transition duration-300 flex items-center justify-center gap-2">
                            <i class="fab fa-x-twitter text-lg"></i>
                            <span class="text-sm">تويتر</span>
                        </button>
                        <button onclick="shareOnFacebook()" class="bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-lg transition duration-300 flex items-center justify-center gap-2">
                            <i class="fab fa-facebook text-lg"></i>
                            <span class="text-sm">فيسبوك</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Course Modal -->
    <div id="addCourseModal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 hidden">
        <div class="glass-card rounded-2xl p-8 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-start mb-6">
                <div>
                    <h2 class="text-3xl font-bold gradient-text mb-2">إضافة مادة جديدة</h2>
                    <p class="text-stardust/70">أضف مادة لم تجدها في النظام</p>
                </div>
                <button onclick="closeAddCourseModal()" class="text-stardust hover:text-white text-2xl">&times;</button>
            </div>

            <form id="addCourseForm" class="space-y-6">
                <!-- User Information Section -->
                <div class="bg-nebula/30 rounded-lg p-4 border border-stardust/20">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <div class="ml-3">
                                <div class="text-white font-medium" id="form-user-name">اسم المستخدم</div>
                                <div class="text-stardust/70 text-sm" id="form-user-status">مسجل الدخول</div>
                            </div>
                        </div>
                        <div class="text-aurora" id="form-user-icon">
                            <i class="fas fa-user-check text-xl"></i>
                        </div>
                    </div>
                </div>
                
                <!-- Course Code -->
                <div>
                    <label for="courseCode" class="block text-white font-medium mb-2">
                        رمز المادة <span class="text-supernova">*</span> <span class="text-xs text-stardust/70">(أحرف وأرقام معاً)</span>
                    </label>
                    <input type="text" id="courseCode" name="courseCode" required 
                           class="w-full px-4 py-3 bg-nebula/50 border border-nebula rounded-lg text-white placeholder-stardust/50 focus:border-photon focus:outline-none"
                           placeholder="مثال: BUS101, ACC240, MKT350">
                </div>

                <!-- Course Title -->
                <div>
                    <label for="courseTitle" class="block text-white font-medium mb-2">
                        اسم المادة <span class="text-supernova">*</span> <span class="text-xs text-stardust/70">(3 أحرف على الأقل)</span>
                    </label>
                    <input type="text" id="courseTitle" name="courseTitle" required 
                           class="w-full px-4 py-3 bg-nebula/50 border border-nebula rounded-lg text-white placeholder-stardust/50 focus:border-photon focus:outline-none"
                           placeholder="مثال: مبادئ الإدارة">
                </div>

                <!-- Course Description -->
                <div>
                    <label for="courseDesc" class="block text-white font-medium mb-2">
                        وصف المادة <span class="text-supernova">*</span> <span class="text-xs text-stardust/70">(6 كلمات على الأقل)</span>
                    </label>
                    <textarea id="courseDesc" name="courseDesc" required rows="4"
                              class="w-full px-4 py-3 bg-nebula/50 border border-nebula rounded-lg text-white placeholder-stardust/50 focus:border-photon focus:outline-none resize-none"
                              placeholder="وصف مختصر عن محتوى المادة وأهدافها ومواضيعها الأساسية..."></textarea>
                </div>

                <!-- Major -->
                <div>
                    <label for="courseMajor" class="block text-white font-medium mb-2">
                        التخصص <span class="text-supernova">*</span>
                    </label>
                    <select id="courseMajor" name="courseMajor" required 
                            class="w-full px-4 py-3 bg-nebula/50 border border-nebula rounded-lg text-white focus:border-photon focus:outline-none">
                        <option value="">اختر التخصص</option>
                        <option value="إدارة الأعمال">إدارة الأعمال</option>
                        <option value="المحاسبة">المحاسبة</option>
                        <option value="الإدارة المالية">الإدارة المالية</option>
                        <option value="التجارة الإلكترونية">التجارة الإلكترونية</option>
                    </select>
                </div>

                <!-- Level -->
                <div>
                    <label for="courseLevel" class="block text-white font-medium mb-2">
                        المستوى <span class="text-supernova">*</span>
                    </label>
                    <select id="courseLevel" name="courseLevel" required 
                            class="w-full px-4 py-3 bg-nebula/50 border border-nebula rounded-lg text-white focus:border-photon focus:outline-none">
                        <option value="">اختر المستوى</option>
                        <option value="1">المستوى الأول</option>
                        <option value="2">المستوى الثاني</option>
                        <option value="3">المستوى الثالث</option>
                        <option value="4">المستوى الرابع</option>
                        <option value="5">المستوى الخامس</option>
                        <option value="6">المستوى السادس</option>
                        <option value="7">المستوى السابع</option>
                        <option value="8">المستوى الثامن</option>
                    </select>
                </div>

                <!-- Credits -->
                <div>
                    <label for="courseCredits" class="block text-white font-medium mb-2">
                        عدد الساعات
                    </label>
                    <input type="number" id="courseCredits" name="courseCredits" min="1" max="6" 
                           class="w-full px-4 py-3 bg-nebula/50 border border-nebula rounded-lg text-white placeholder-stardust/50 focus:border-photon focus:outline-none"
                           placeholder="3">
                </div>

                <!-- Resources Section -->
                <div>
                    <h3 class="text-xl font-bold text-white mb-4">المصادر (اختياري)</h3>
                    <div id="resourcesContainer" class="space-y-4">
                        <!-- Initial resource input -->
                        <div class="resource-input flex gap-3">
                            <select class="resource-type px-3 py-2 bg-nebula/50 border border-nebula rounded-lg text-white focus:border-photon focus:outline-none">
                                <option value="youtube">يوتيوب</option>
                                <option value="drive">درايف</option>
                                <option value="telegram">تليجرام</option>
                                <option value="mega">ميجا</option>
                                <option value="other">أخرى</option>
                            </select>
                            <input type="text" class="resource-text flex-1 px-3 py-2 bg-nebula/50 border border-nebula rounded-lg text-white placeholder-stardust/50 focus:border-photon focus:outline-none" placeholder="عنوان المصدر">
                            <input type="url" class="resource-link flex-1 px-3 py-2 bg-nebula/50 border border-nebula rounded-lg text-white placeholder-stardust/50 focus:border-photon focus:outline-none" placeholder="https://...">
                            <button type="button" onclick="removeResource(this)" class="resource-delete-btn">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" height="16" width="16">
                                    <path fill="#ef4444" d="M8.78842 5.03866C8.86656 4.96052 8.97254 4.91663 9.08305 4.91663H11.4164C11.5269 4.91663 11.6329 4.96052 11.711 5.03866C11.7892 5.11681 11.833 5.22279 11.833 5.33329V5.74939H8.66638V5.33329C8.66638 5.22279 8.71028 5.11681 8.78842 5.03866ZM7.16638 5.74939V5.33329C7.16638 4.82496 7.36832 4.33745 7.72776 3.978C8.08721 3.61856 8.57472 3.41663 9.08305 3.41663H11.4164C11.9247 3.41663 12.4122 3.61856 12.7717 3.978C13.1311 4.33745 13.333 4.82496 13.333 5.33329V5.74939H15.5C15.9142 5.74939 16.25 6.08518 16.25 6.49939C16.25 6.9136 15.9142 7.24939 15.5 7.24939H15.0105L14.2492 14.7095C14.2382 15.2023 14.0377 15.6726 13.6883 16.0219C13.3289 16.3814 12.8414 16.5833 12.333 16.5833H8.16638C7.65805 16.5833 7.17054 16.3814 6.81109 16.0219C6.46176 15.6726 6.2612 15.2023 6.25019 14.7095L5.48896 7.24939H5C4.58579 7.24939 4.25 6.9136 4.25 6.49939C4.25 6.08518 4.58579 5.74939 5 5.74939H6.16667H7.16638ZM7.91638 7.24996H12.583H13.5026L12.7536 14.5905C12.751 14.6158 12.7497 14.6412 12.7497 14.6666C12.7497 14.7771 12.7058 14.8831 12.6277 14.9613C12.5495 15.0394 12.4436 15.0833 12.333 15.0833H8.16638C8.05588 15.0833 7.94989 15.0394 7.87175 14.9613C7.79361 14.8831 7.74972 14.7771 7.74972 14.6666C7.74972 14.6412 7.74842 14.6158 7.74584 14.5905L6.99681 7.24996H7.91638Z" clip-rule="evenodd" fill-rule="evenodd"></path>
                                </svg>
                                <span class="resource-delete-tooltiptext">حذف</span>
                            </button>
                        </div>
                    </div>
                    <button type="button" onclick="addResourceInput()" class="gradient-bg text-white px-4 py-2 rounded-lg hover:scale-105 transition-all duration-300 flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-4 h-4">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
                        </svg>
                        إضافة مصدر آخر
                    </button>
                </div>

                <!-- Submit Button -->
                <div class="flex justify-end gap-4 pt-6 border-t border-nebula/20">
                    <button type="button" onclick="closeAddCourseModal()" 
                            class="px-6 py-3 text-stardust hover:text-white transition duration-300">
                        إلغاء
                    </button>
                    <button type="submit" 
                            class="px-6 py-3 bg-gradient-to-r from-plasma to-aurora text-white rounded-lg hover:scale-105 transition duration-300">
                        إضافة المادة
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Edit Course Modal -->
    <div id="editCourseModal" class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 hidden">
        <div class="glass-card p-8 max-w-2xl max-h-[90vh] overflow-y-auto w-full mx-4 rounded-xl">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-white">تعديل المادة</h2>
                <button onclick="closeEditCourseModal()" class="text-stardust hover:text-white text-2xl">&times;</button>
            </div>
            
            <form id="editCourseForm" class="space-y-6">
                <!-- Course Code -->
                <div>
                    <label class="block text-white font-medium mb-2">رمز المادة</label>
                    <input type="text" id="editCourseCode" name="courseCode" readonly
                           class="w-full px-3 py-2 bg-nebula/50 border border-nebula rounded-lg text-white/70 cursor-not-allowed focus:outline-none"
                           placeholder="CS101">
                </div>

                <!-- Course Title -->
                <div>
                    <label class="block text-white font-medium mb-2">اسم المادة * <span class="text-xs text-stardust/70">(3 أحرف على الأقل)</span></label>
                    <input type="text" id="editCourseTitle" name="courseTitle" required
                           class="w-full px-3 py-2 bg-nebula/50 border border-nebula rounded-lg text-white placeholder-stardust/50 focus:border-photon focus:outline-none"
                           placeholder="مثال: مبادئ الإدارة">
                </div>

                <!-- Course Description -->
                <div>
                    <label class="block text-white font-medium mb-2">وصف المادة * <span class="text-xs text-stardust/70">(6 كلمات على الأقل)</span></label>
                    <textarea id="editCourseDesc" name="courseDesc" required rows="3"
                              class="w-full px-3 py-2 bg-nebula/50 border border-nebula rounded-lg text-white placeholder-stardust/50 focus:border-photon focus:outline-none resize-none"
                              placeholder="وصف مختصر عن محتوى المادة وأهدافها ومواضيعها"></textarea>
                </div>

                <!-- Course Details Row -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <!-- Major -->
                    <div>
                        <label class="block text-white font-medium mb-2">التخصص *</label>
                        <select id="editCourseMajor" name="courseMajor" required
                                class="w-full px-3 py-2 bg-nebula/50 border border-nebula rounded-lg text-white focus:border-photon focus:outline-none">
                            <option value="">اختر التخصص</option>
                            <option value="إدارة الأعمال">إدارة الأعمال</option>
                            <option value="المحاسبة">المحاسبة</option>
                            <option value="مالية">مالية</option>
                            <option value="تجارة إلكترونية">تجارة إلكترونية</option>
                            <option value="المواد العامة">المواد العامة</option>
                        </select>
                    </div>

                    <!-- Level -->
                    <div>
                        <label class="block text-white font-medium mb-2">المستوى *</label>
                        <select id="editCourseLevel" name="courseLevel" required
                                class="w-full px-3 py-2 bg-nebula/50 border border-nebula rounded-lg text-white focus:border-photon focus:outline-none">
                            <option value="">اختر المستوى</option>
                            <option value="3">المستوى الثالث</option>
                            <option value="4">المستوى الرابع</option>
                            <option value="5">المستوى الخامس</option>
                            <option value="6">المستوى السادس</option>
                            <option value="7">المستوى السابع</option>
                            <option value="8">المستوى الثامن</option>
                        </select>
                    </div>

                    <!-- Credits -->
                    <div>
                        <label class="block text-white font-medium mb-2">الساعات المعتمدة</label>
                        <input type="number" id="editCourseCredits" name="courseCredits" min="1" max="6" value="3"
                               class="w-full px-3 py-2 bg-nebula/50 border border-nebula rounded-lg text-white placeholder-stardust/50 focus:border-photon focus:outline-none"
                               placeholder="3">
                    </div>
                </div>

                <!-- Resources -->
                <div>
                    <label class="block text-white font-medium mb-2">الموارد والمراجع</label>
                    <div id="editResourcesContainer" class="space-y-3">
                        <div class="resource-input flex gap-3">
                            <select class="resource-type px-3 py-2 bg-nebula/50 border border-nebula rounded-lg text-white focus:border-photon focus:outline-none">
                                <option value="youtube">يوتيوب</option>
                                <option value="drive">درايف</option>
                                <option value="telegram">تليجرام</option>
                                <option value="mega">ميجا</option>
                                <option value="other">أخرى</option>
                            </select>
                            <input type="text" class="resource-text flex-1 px-3 py-2 bg-nebula/50 border border-nebula rounded-lg text-white placeholder-stardust/50 focus:border-photon focus:outline-none" placeholder="عنوان المصدر">
                            <input type="url" class="resource-link flex-1 px-3 py-2 bg-nebula/50 border border-nebula rounded-lg text-white placeholder-stardust/50 focus:border-photon focus:outline-none" placeholder="https://...">
                            <button type="button" onclick="removeEditResource(this)" class="resource-delete-btn">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" height="16" width="16">
                                    <path fill="#ef4444" d="M8.78842 5.03866C8.86656 4.96052 8.97254 4.91663 9.08305 4.91663H11.4164C11.5269 4.91663 11.6329 4.96052 11.711 5.03866C11.7892 5.11681 11.833 5.22279 11.833 5.33329V5.74939H8.66638V5.33329C8.66638 5.22279 8.71028 5.11681 8.78842 5.03866ZM7.16638 5.74939V5.33329C7.16638 4.82496 7.36832 4.33745 7.72776 3.978C8.08721 3.61856 8.57472 3.41663 9.08305 3.41663H11.4164C11.9247 3.41663 12.4122 3.61856 12.7717 3.978C13.1311 4.33745 13.333 4.82496 13.333 5.33329V5.74939H15.5C15.9142 5.74939 16.25 6.08518 16.25 6.49939C16.25 6.9136 15.9142 7.24939 15.5 7.24939H15.0105L14.2492 14.7095C14.2382 15.2023 14.0377 15.6726 13.6883 16.0219C13.3289 16.3814 12.8414 16.5833 12.333 16.5833H8.16638C7.65805 16.5833 7.17054 16.3814 6.81109 16.0219C6.46176 15.6726 6.2612 15.2023 6.25019 14.7095L5.48896 7.24939H5C4.58579 7.24939 4.25 6.9136 4.25 6.49939C4.25 6.08518 4.58579 5.74939 5 5.74939H6.16667H7.16638ZM7.91638 7.24996H12.583H13.5026L12.7536 14.5905C12.751 14.6158 12.7497 14.6412 12.7497 14.6666C12.7497 14.7771 12.7058 14.8831 12.6277 14.9613C12.5495 15.0394 12.4436 15.0833 12.333 15.0833H8.16638C8.05588 15.0833 7.94989 15.0394 7.87175 14.9613C7.79361 14.8831 7.74972 14.7771 7.74972 14.6666C7.74972 14.6412 7.74842 14.6158 7.74584 14.5905L6.99681 7.24996H7.91638Z" clip-rule="evenodd" fill-rule="evenodd"></path>
                                </svg>
                                <span class="resource-delete-tooltiptext">حذف</span>
                            </button>
                        </div>
                    </div>
                    <button type="button" onclick="addEditResourceInput()" 
                            class="mt-3 text-photon hover:text-white transition duration-300 text-sm">
                        <i class="fas fa-plus ml-2"></i> إضافة مصدر آخر
                    </button>
                </div>

                <!-- Submit Button -->
                <div class="flex justify-end gap-4 pt-6 border-t border-nebula/20">
                    <button type="button" onclick="closeEditCourseModal()" 
                            class="px-6 py-3 text-stardust hover:text-white transition duration-300">
                        إلغاء
                    </button>
                    <button type="submit" 
                            class="px-6 py-3 bg-gradient-to-r from-plasma to-aurora text-white rounded-lg hover:scale-105 transition duration-300">
                        حفظ التغييرات
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Course data - empty initially, users will add courses through the interface
        const courses = {};

        // ملاحظة: لا توجد مواد افتراضية مزروعة؛ يتم التحميل من Firebase أو localStorage فقط

        // ---- Cache settings (business page) ----
        const CACHE_KEY = 'business_firebase_courses';
        const CACHE_TS_KEY = 'business_firebase_courses_ts';
        const CACHE_TTL_MS = 12 * 60 * 60 * 1000; // 12 hours

        function getCachedCourses() {
            try {
                const raw = localStorage.getItem(CACHE_KEY);
                return raw ? JSON.parse(raw) : null;
            } catch (e) {
                console.warn('تعذر قراءة كاش البزنس:', e);
                return null;
            }
        }

        function setCachedCourses(data) {
            try {
                localStorage.setItem(CACHE_KEY, JSON.stringify(data || {}));
                localStorage.setItem(CACHE_TS_KEY, Date.now().toString());
            } catch (e) {
                console.warn('تعذر حفظ كاش البزنس:', e);
            }
        }

        function isCacheFresh() {
            const ts = parseInt(localStorage.getItem(CACHE_TS_KEY) || '0', 10);
            return ts && (Date.now() - ts) < CACHE_TTL_MS;
        }
    
        // Function to open the modal with course details
        function openModal(courseCode, courseTitle) {
            // Check in both local courses and Firebase courses
            let course = courses[courseCode];
            if (!course && window.userCourses) {
                course = window.userCourses[courseCode];
            }
            
            console.log(`🔍 Opening modal for course: ${courseCode}`, course);
            
            if (!course) {
                alert("المادة غير موجودة في النظام");
                return;
            }
            
            document.getElementById("modalCourseCode").textContent = courseCode;
            document.getElementById("modalCourseTitle").textContent = courseTitle;
            document.getElementById("modalCourseDesc").textContent = course.desc;
            document.getElementById("modalCourseMajor").textContent = course.major;
            
            // Populate resources
            const resourcesContainer = document.getElementById('course-resources');
            resourcesContainer.innerHTML = '';
            
            // Add course creator information if available
            if (course.addedBy) {
                const creatorInfo = document.createElement('div');
                creatorInfo.className = 'mb-6 p-4 bg-nebula/30 rounded-lg border border-stardust/20';
                creatorInfo.innerHTML = `
                    <div class="flex items-center text-stardust/80">
                        <i class="fas fa-user-plus text-aurora ml-3"></i>
                        <div>
                            <div class="text-white font-medium">أضيفت بواسطة</div>
                            <div class="text-aurora">${course.addedBy.name}</div>
                        </div>
                    </div>
                `;
                resourcesContainer.appendChild(creatorInfo);
            }
            
            if (course.resources && course.resources.length > 0) {
                course.resources.forEach(resource => {
                    let icon = '';
                    let platform = '';
                    switch(resource.type) {
                        case 'youtube':
                            icon = '<i class="fab fa-youtube text-xl text-red-500 mr-2"></i>';
                            platform = 'يوتيوب';
                            break;
                        case 'drive':
                            icon = '<i class="fab fa-google-drive text-xl text-blue-500 mr-2"></i>';
                            platform = 'جوجل درايف';
                            break;
                        case 'telegram':
                            icon = '<i class="fab fa-telegram text-xl text-blue-400 mr-2"></i>';
                            platform = 'تلجرام';
                            break;
                        case 'mega':
                            icon = '<i class="fas fa-cloud-download-alt text-xl text-purple-500 mr-2"></i>';
                            platform = 'ميجا';
                            break;
                        default:
                            icon = '<i class="fas fa-link text-xl text-photon mr-2"></i>';
                            platform = 'رابط';
                    }
                    
                    const resourceCard = document.createElement('div');
                    
                    // Check if it's a YouTube resource to use the modern card design
                    if (resource.type === 'youtube') {
                        resourceCard.className = 'modern-card';
                        resourceCard.innerHTML = `
                            <div class="modern-img">
                                <div class="modern-save">
                                    <svg class="svg" width="683" height="683" viewBox="0 0 683 683" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <g clip-path="url(#clip0_993_25)">
                                            <mask id="mask0_993_25" style="mask-type:luminance" maskUnits="userSpaceOnUse" x="0" y="0" width="683" height="683">
                                                <path d="M0 -0.00012207H682.667V682.667H0V-0.00012207Z" fill="white"></path>
                                            </mask>
                                            <g mask="url(#mask0_993_25)">
                                                <path d="M148.535 19.9999C137.179 19.9999 126.256 24.5092 118.223 32.5532C110.188 40.5866 105.689 51.4799 105.689 62.8439V633.382C105.689 649.556 118.757 662.667 134.931 662.667H135.039C143.715 662.667 151.961 659.218 158.067 653.09C186.451 624.728 270.212 540.966 304.809 506.434C314.449 496.741 327.623 491.289 341.335 491.289C355.045 491.289 368.22 496.741 377.859 506.434C412.563 541.074 496.752 625.242 524.816 653.348C530.813 659.314 538.845 662.667 547.308 662.667C563.697 662.667 576.979 649.395 576.979 633.019V62.8439C576.979 51.4799 572.48 40.5866 564.447 32.5532C556.412 24.5092 545.489 19.9999 534.133 19.9999H148.535Z" stroke="#CED8DE" stroke-width="40" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"></path>
                                            </g>
                                        </g>
                                        <defs>
                                            <clipPath id="clip0_993_25">
                                                <rect width="682.667" height="682.667" fill="white"></rect>
                                            </clipPath>
                                        </defs>
                                    </svg>
                                </div>
                            </div>
                            <div class="modern-text">
                                <p class="h3">${resource.text}</p>
                                <p class="p">فيديو تعليمي - ${platform}</p>
                                <div class="modern-icon-box">
                                    <svg version="1.1" class="svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512.001 512.001">
                                        <g>
                                            <path style="fill:#3D6687;" d="M165,68.715l-26.327-26.327l37.363-37.363c3.739-3.739,9.801-3.739,13.54,0l12.786,12.786c3.739,3.739,3.739,9.801,0,13.54L165,68.715z"></path>
                                            <path style="fill:#3D6687;" d="M234.998,101.725l-26.327-26.327l37.363-37.363c3.739-3.739,9.801-3.739,13.54,0l12.786,12.786c3.739,3.739,3.739,9.801,0,13.54L234.998,101.725z"></path>
                                        </g>
                                    </svg>
                                    <p class="span">مشاهدة الآن</p>
                                </div>
                            </div>
                        `;
                        // Add click event to open YouTube link
                        resourceCard.addEventListener('click', function() {
                            window.open(resource.link, '_blank');
                        });
                    } else {
                        // Use the original design for non-YouTube resources
                        resourceCard.className = 'resource-card';
                        resourceCard.innerHTML = `
                            <a href="${resource.link}" target="_blank" class="flex items-center">
                                ${icon}
                                <div>
                                    <h4 class="font-bold text-white">${resource.text}</h4>
                                    <p class="text-stardust/70 text-sm">${platform}</p>
                                </div>
                            </a>
                        `;
                    }
                    resourcesContainer.appendChild(resourceCard);
                });
            } else {
                resourcesContainer.innerHTML = '<p class="text-stardust/70">لا تتوفر موارد لهذه المادة حالياً.</p>';
            }
            
            // Add edit and delete buttons for user-added courses
            const modalHeader = document.querySelector('#courseModal .flex.flex-col.sm\\:flex-row .flex.items-center.gap-3');
            const existingDeleteBtn = modalHeader?.querySelector('.delete-course-btn');
            const existingEditBtn = modalHeader?.querySelector('.edit-course-btn');
            
            // Remove existing buttons from header
            if (existingDeleteBtn) {
                existingDeleteBtn.remove();
            }
            if (existingEditBtn) {
                existingEditBtn.remove();
            }

            // Remove existing mobile actions container if it exists
            const existingMobileActions = document.querySelector('#courseModal .mobile-actions-container');
            if (existingMobileActions) {
                existingMobileActions.remove();
            }
            
            if (isUserAddedCourse(courseCode)) {
                // Create mobile actions container for mobile view
                const mobileActionsContainer = document.createElement('div');
                mobileActionsContainer.className = 'mobile-actions-container';

                // Create action buttons with mobile design
                const mobileEditBtn = document.createElement('button');
                mobileEditBtn.className = 'mobile-edit-btn-new edit-course-btn';
                mobileEditBtn.innerHTML = `
                    <i class="fas fa-edit mobile-action-btn-icon"></i>
                    <span class="btn-text">تعديل</span>
                `;
                mobileEditBtn.onclick = () => {
                    mobileEditBtn.classList.add('loading');
                    closeModal();
                    setTimeout(() => {
                        mobileEditBtn.classList.remove('loading');
                        openEditCourseModal(courseCode);
                    }, 200);
                };
                
                const mobileDeleteBtn = document.createElement('button');
                mobileDeleteBtn.className = 'delete-tooltip-btn delete-course-btn';
                mobileDeleteBtn.innerHTML = `
                    <i class="fas fa-trash-alt mobile-action-btn-icon"></i>
                    <span class="btn-text">حذف</span>
                `;
                mobileDeleteBtn.onclick = () => {
                    mobileDeleteBtn.classList.add('loading');
                    closeModal();
                    setTimeout(() => {
                        mobileDeleteBtn.classList.remove('loading');
                        deleteUserCourse(courseCode);
                    }, 200);
                };

                // Add buttons to mobile container
                mobileActionsContainer.appendChild(mobileEditBtn);
                mobileActionsContainer.appendChild(mobileDeleteBtn);

                // Insert mobile actions container after course title in modal content
                const modalContent = document.querySelector('#courseModal .flex-1');
                if (modalContent) {
                    modalContent.appendChild(mobileActionsContainer);
                }

                // Create desktop buttons with original styling for header
                const editBtn = document.createElement('button');
                editBtn.className = 'mobile-edit-btn-new edit-course-btn desktop-btn';
                editBtn.innerHTML = `
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="25" height="25">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" stroke="#3b82f6"/>
                    </svg>
                    <span class="edit-tooltiptext">تعديل</span>
                `;
                editBtn.onclick = () => {
                    editBtn.classList.add('loading');
                    closeModal();
                    setTimeout(() => {
                        editBtn.classList.remove('loading');
                        openEditCourseModal(courseCode);
                    }, 200);
                };
                
                const deleteBtn = document.createElement('button');
                deleteBtn.className = 'delete-tooltip-btn delete-course-btn desktop-btn';
                deleteBtn.innerHTML = `
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" height="25" width="25">
                        <path fill="#ef4444" d="M8.78842 5.03866C8.86656 4.96052 8.97254 4.91663 9.08305 4.91663H11.4164C11.5269 4.91663 11.6329 4.96052 11.711 5.03866C11.7892 5.11681 11.833 5.22279 11.833 5.33329V5.74939H8.66638V5.33329C8.66638 5.22279 8.71028 5.11681 8.78842 5.03866ZM7.16638 5.74939V5.33329C7.16638 4.82496 7.36832 4.33745 7.72776 3.978C8.08721 3.61856 8.57472 3.41663 9.08305 3.41663H11.4164C11.9247 3.41663 12.4122 3.61856 12.7717 3.978C13.1311 4.33745 13.333 4.82496 13.333 5.33329V5.74939H15.5C15.9142 5.74939 16.25 6.08518 16.25 6.49939C16.25 6.9136 15.9142 7.24939 15.5 7.24939H15.0105L14.2492 14.7095C14.2382 15.2023 14.0377 15.6726 13.6883 16.0219C13.3289 16.3814 12.8414 16.5833 12.333 16.5833H8.16638C7.65805 16.5833 7.17054 16.3814 6.81109 16.0219C6.46176 15.6726 6.2612 15.2023 6.25019 14.7095L5.48896 7.24939H5C4.58579 7.24939 4.25 6.9136 4.25 6.49939C4.25 6.08518 4.58579 5.74939 5 5.74939H6.16667H7.16638ZM7.91638 7.24996H12.583H13.5026L12.7536 14.5905C12.751 14.6158 12.7497 14.6412 12.7497 14.6666C12.7497 14.7771 12.7058 14.8831 12.6277 14.9613C12.5495 15.0394 12.4436 15.0833 12.333 15.0833H8.16638C8.05588 15.0833 7.94989 15.0394 7.87175 14.9613C7.79361 14.8831 7.74972 14.7771 7.74972 14.6666C7.74972 14.6412 7.74842 14.6158 7.74584 14.5905L6.99681 7.24996H7.91638Z" clip-rule="evenodd" fill-rule="evenodd"></path>
                    </svg>
                    <span class="delete-tooltiptext">حذف</span>
                `;
                deleteBtn.onclick = () => {
                    deleteBtn.classList.add('loading');
                    closeModal();
                    setTimeout(() => {
                        deleteBtn.classList.remove('loading');
                        deleteUserCourse(courseCode);
                    }, 200);
                };
                
                // Insert desktop buttons before the close button in header
                const closeBtn = modalHeader.querySelector('button');
                modalHeader.insertBefore(editBtn, closeBtn);
                modalHeader.insertBefore(deleteBtn, closeBtn);
            }
            
            document.getElementById("courseModal").classList.remove("hidden");
        }

        // Site Configuration for sharing
        const SITE_CONFIG = {
            PRODUCTION_URL: 'https://fxrg.github.io/subject-search-/page/all-colleges/business/business.html',
            SITE_NAME: 'كلية العلوم الإدارية والمالية - الجامعة السعودية الإلكترونية',
            SITE_DESCRIPTION: 'منصة البحث عن المواد الدراسية لكلية العلوم الإدارية والمالية في الجامعة السعودية الإلكترونية',
            COLLEGE: 'business'
        };

        // Share Course Variables and Functions
        let currentShareCourse = null;
        
        function shareCourse() {
            const courseCode = document.getElementById("modalCourseCode").textContent;
            const courseTitle = document.getElementById("modalCourseTitle").textContent;
            
            currentShareCourse = {
                code: courseCode,
                title: courseTitle
            };
            
            // Update modal title
            document.getElementById("shareModalSubtitle").textContent = `شارك مادة ${courseCode} - ${courseTitle}`;
            
            // Generate links
            generateShareLinks(courseCode, courseTitle);
            
            // Show development notice if running locally
            const isLocalDevelopment = window.location.hostname === 'localhost' || 
                                      window.location.hostname === '127.0.0.1';
            
            if (isLocalDevelopment) {
                // Add development notice to modal
                const existingNotice = document.getElementById('dev-notice');
                if (existingNotice) existingNotice.remove();
                
                const devNotice = document.createElement('div');
                devNotice.id = 'dev-notice';
                devNotice.className = 'bg-yellow-600/20 border border-yellow-500/30 rounded-lg p-3 mb-4 text-center';
                devNotice.innerHTML = `
                    <div class="flex items-center justify-center text-yellow-300 text-sm">
                        <i class="fas fa-info-circle ml-2"></i>
                        <span>وضع التطوير: الروابط تستخدم GitHub Pages (${SITE_CONFIG.PRODUCTION_URL})</span>
                    </div>
                `;
                
                const shareModalContent = document.querySelector('#shareCourseModal .space-y-6');
                shareModalContent.insertBefore(devNotice, shareModalContent.firstChild);
            }
            
            // Show share modal
            document.getElementById("shareCourseModal").classList.remove("hidden");
            
            // Generate QR code
            generateQRCode();
        }
        
        function generateShareLinks(courseCode, courseTitle) {
            // Use the production URL for sharing links
            const isLocalhost = window.location.hostname === 'localhost' || 
                               window.location.hostname === '127.0.0.1' || 
                               window.location.hostname === '';
            
            let baseUrl;
            if (isLocalhost) {
                // If running locally, use production URL for sharing
                baseUrl = SITE_CONFIG.PRODUCTION_URL;
            } else {
                // If already on live site, use current URL
                baseUrl = window.location.origin + window.location.pathname;
            }
            
            const directLink = `${baseUrl}?course=${encodeURIComponent(courseCode)}`;
            const websiteLink = `${baseUrl}#course-${courseCode}`;
            
            document.getElementById("courseDirectLink").value = directLink;
            document.getElementById("courseWebsiteLink").value = websiteLink;
        }
        
        async function copyDirectLink() {
            const link = document.getElementById("courseDirectLink").value;
            const button = event.target.closest('button');
            const textSpan = button.querySelector('.copy-btn-text');
            
            try {
                await navigator.clipboard.writeText(link);
                textSpan.textContent = 'تم النسخ!';
                button.classList.add('bg-green-500');
                button.classList.remove('bg-aurora');
                
                setTimeout(() => {
                    textSpan.textContent = 'نسخ';
                    button.classList.remove('bg-green-500');
                    button.classList.add('bg-aurora');
                }, 2000);
            } catch (err) {
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = link;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                
                textSpan.textContent = 'تم النسخ!';
                setTimeout(() => {
                    textSpan.textContent = 'نسخ';
                }, 2000);
            }
        }
        
        async function copyWebsiteLink() {
            const link = document.getElementById("courseWebsiteLink").value;
            const button = event.target.closest('button');
            const textSpan = button.querySelector('.copy-btn-text-2');
            
            try {
                await navigator.clipboard.writeText(link);
                textSpan.textContent = 'تم النسخ!';
                button.classList.add('bg-green-500');
                button.classList.remove('bg-plasma');
                
                setTimeout(() => {
                    textSpan.textContent = 'نسخ';
                    button.classList.remove('bg-green-500');
                    button.classList.add('bg-plasma');
                }, 2000);
            } catch (err) {
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = link;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                
                textSpan.textContent = 'تم النسخ!';
                setTimeout(() => {
                    textSpan.textContent = 'نسخ';
                }, 2000);
            }
        }
        
        function shareOnWhatsApp() {
            const link = document.getElementById("courseDirectLink").value;
            const message = `📚 أريد مشاركة مادة ${currentShareCourse.code} - ${currentShareCourse.title} معك!\n\n🔗 يمكنك الوصول لها مباشرة من خلال هذا الرابط:\n${link}\n\n🎓 ${SITE_CONFIG.SITE_NAME}\n✨ ${SITE_CONFIG.SITE_DESCRIPTION}`;
            const whatsappUrl = `https://wa.me/?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');
        }
        
        function shareOnTelegram() {
            const link = document.getElementById("courseDirectLink").value;
            const message = `📚 مادة ${currentShareCourse.code} - ${currentShareCourse.title}\n\n🔗 الرابط المباشر: ${link}\n\n🎓 ${SITE_CONFIG.SITE_NAME}`;
            const telegramUrl = `https://t.me/share/url?url=${encodeURIComponent(link)}&text=${encodeURIComponent(message)}`;
            window.open(telegramUrl, '_blank');
        }
        
        function shareOnTwitter() {
            const link = document.getElementById("courseDirectLink").value;
            const message = `📚 مادة ${currentShareCourse.code} - ${currentShareCourse.title} من كلية العلوم الإدارية والمالية 🎓\n\n${SITE_CONFIG.SITE_DESCRIPTION}\n\n#الجامعة_السعودية_الإلكترونية #كلية_الأعمال #SEU`;
            const twitterUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(message)}&url=${encodeURIComponent(link)}`;
            window.open(twitterUrl, '_blank');
        }
        
        function shareOnFacebook() {
            const link = document.getElementById("courseDirectLink").value;
            const facebookUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(link)}`;
            window.open(facebookUrl, '_blank');
        }
        
        function generateQRCode() {
            const link = document.getElementById("courseDirectLink").value;
            const qrContainer = document.getElementById("qrCodeContainer");
            
            // Clear previous QR code
            qrContainer.innerHTML = '<div class="loading-spinner"></div>';
            
            // Generate QR code using qr-server API
            const qrUrl = `https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=${encodeURIComponent(link)}&bgcolor=FFFFFF&color=000000`;
            
            const img = new Image();
            img.onload = function() {
                qrContainer.innerHTML = '';
                qrContainer.appendChild(img);
            };
            img.onerror = function() {
                qrContainer.innerHTML = `
                    <div class="text-center text-gray-500">
                        <i class="fas fa-exclamation-triangle text-2xl mb-2"></i>
                        <p class="text-sm">لا يمكن إنشاء كود QR</p>
                    </div>
                `;
            };
            img.src = qrUrl;
            img.alt = 'QR Code';
            img.className = 'max-w-full h-auto';
        }
        
        function closeShareModal() {
            document.getElementById("shareCourseModal").classList.add("hidden");
            currentShareCourse = null;
            
            // Remove development notice if exists
            const devNotice = document.getElementById('dev-notice');
            if (devNotice) devNotice.remove();
        }
        
        // Show share notification
        function showShareNotification(courseCode, courseTitle) {
            const isLocalDevelopment = window.location.hostname === 'localhost' || 
                                      window.location.hostname === '127.0.0.1';
            
            if (!isLocalDevelopment) return;
            
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                padding: 16px 24px;
                border-radius: 12px;
                box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
                z-index: 1000;
                max-width: 350px;
                animation: slideInRight 0.5s ease-out;
            `;
            
            notification.innerHTML = `
                <div style="display: flex; align-items: center; gap: 12px;">
                    <i class="fas fa-share-alt" style="font-size: 18px; color: #fbbf24;"></i>
                    <div>
                        <div style="font-weight: 600; margin-bottom: 4px;">تم الوصول عبر رابط مشترك</div>
                        <div style="font-size: 14px; opacity: 0.9;">مادة ${courseCode} - ${courseTitle}</div>
                    </div>
                    <button onclick="this.parentElement.parentElement.remove()" 
                            style="background: none; border: none; color: white; font-size: 20px; cursor: pointer; margin-left: auto;">&times;</button>
                </div>
            `;
            
            // Add slide-in animation
            const style = document.createElement('style');
            style.textContent = `
                @keyframes slideInRight {
                    from { transform: translateX(100%); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
            `;
            document.head.appendChild(style);
            
            document.body.appendChild(notification);
            
            // Auto remove after 5 seconds
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.style.animation = 'slideInRight 0.5s ease-out reverse';
                    setTimeout(() => notification.remove(), 500);
                }
            }, 5000);
        }

        // Function to close the modal
        function closeModal() {
            document.getElementById("courseModal").classList.add("hidden");
        }
        
        // Function to show all courses for a major
        function showAllCourses(major) {
            let title = '';
            switch(major) {
                case 'business-administration':
                    title = 'إدارة الأعمال';
                    break;
                case 'accounting':
                    title = 'المحاسبة';
                    break;
                case 'finance':
                    title = 'الإدارة المالية';
                    break;
                case 'e-commerce':
                    title = 'التجارة الإلكترونية';
                    break;
                // Keep old IDs for backward compatibility
                case 'cs':
                    title = 'إدارة الأعمال';
                    break;
                case 'ds':
                    title = 'المحاسبة';
                    break;
                case 'it':
                    title = 'الإدارة المالية';
                    break;
                case 'ecommerce':
                    title = 'التجارة الإلكترونية';
                    break;
            }
            
            document.getElementById('allCoursesTitle').textContent = `جميع مواد ${title} والمواد العامة`;
            
            const container = document.getElementById('allCoursesContainer');
            container.innerHTML = '';
            
            // Filter courses by major and general courses
            const filteredCourses = Object.entries(courses).filter(([code, course]) => {
                return course.major === title || course.major === "المواد العامة";
            });
            
            // Sort courses by level
            filteredCourses.sort((a, b) => a[1].level - b[1].level);
            
            // Render courses
            filteredCourses.forEach(([code, course]) => {
                const level = course.level || 3;
                const isUserAdded = isUserAddedCourse(code);
                
                const courseCard = document.createElement('div');
                courseCard.className = 'course-card glow-border rounded-2xl p-6 group overflow-hidden relative';
                courseCard.innerHTML = `
                    <span class="level-badge level-${level}">المستوى ${level}</span>
                    ${isUserAdded ? '<span class="absolute top-2 right-2 bg-aurora text-white text-xs px-2 py-1 rounded-full z-20">مجتمع</span>' : ''}
                    <div class="relative z-10">
                        <h3 class="text-xl font-bold text-white mb-1">${code}</h3>
                        <h4 class="text-lg font-bold text-white mb-3">${course.title}</h4>
                        <p class="text-stardust/70 text-sm mb-4 line-clamp-3">${course.desc}</p>
                        <div class="flex flex-wrap gap-2 mb-4">
                            <span class="bg-nebula/30 text-photon text-xs px-2 py-1 rounded-full">${course.credits || 3} ساعات</span>
                            <span class="bg-nebula/30 text-photon text-xs px-2 py-1 rounded-full">${course.major}</span>
                        </div>
                        <button onclick="closeAllCoursesModal(); openModal('${code}', '${course.title}')" class="inline-flex items-center text-photon group-hover:text-white transition duration-300 text-sm font-medium">
                            تفاصيل المادة <i class="fas fa-arrow-left ml-1"></i>
                        </button>
                    </div>
                `;
                container.appendChild(courseCard);
            });
            
            document.getElementById("allCoursesModal").classList.remove("hidden");
        }

        // Function to close all courses modal
        function closeAllCoursesModal() {
            document.getElementById("allCoursesModal").classList.add("hidden");
        }

        // Function to search courses (with filters)
        function searchCourses() {
            try { console.log('🔎 [Business] searchCourses: total courses =', Object.keys(courses||{}).length); } catch(e) {}
            const searchTerm = document.getElementById("courseSearch").value.trim().toUpperCase();
            const majorFilter = (document.getElementById('majorFilter') && document.getElementById('majorFilter').value) || '';
            const levelFilter = (document.getElementById('levelFilter') && document.getElementById('levelFilter').value) || '';
            const hoursFilter = (document.getElementById('hoursFilter') && document.getElementById('hoursFilter').value) || '';
            
            if (!searchTerm) {
                clearSearch();
                return;
            }
            
            // Hide all original sections
            document.querySelectorAll("section[id='cs'], section[id='ds'], section[id='it'], section[id='ecommerce'], section[id='overview']").forEach(section => {
                section.classList.add("hidden");
            });
            
            // Show search results section
            const searchResultsSection = document.getElementById("search-results");
            searchResultsSection.classList.remove("hidden");
            
            // Update search term display
            document.getElementById("search-term-display").textContent = searchTerm;
            
            // Clear previous results
            const searchResultsContainer = document.getElementById("search-results-container");
            searchResultsContainer.innerHTML = '';
            
            // Search in all courses (including Firebase courses)
            let found = false;
            
            // Get all courses from both local and Firebase
            const allCourses = { ...courses };
            
            // The courses object already contains Firebase courses from loadCoursesFromFirebase()
            // No need to check window.userCourses separately
            
            Object.keys(allCourses).forEach(code => {
                const course = allCourses[code] || {};
                const matchBase = (
                    code.toUpperCase().includes(searchTerm) ||
                    (course.title || '').toUpperCase().includes(searchTerm) ||
                    (course.desc || '').toUpperCase().includes(searchTerm)
                );

                function matchesMajor(course, code) {
                    if (!majorFilter) return true;
                    const mj = String(course.major || '').trim();
                    if (majorFilter === 'business-administration') {
                        return mj.includes('إدارة') || code.toUpperCase().startsWith('BUS');
                    } else if (majorFilter === 'accounting') {
                        return mj.includes('محاس') || code.toUpperCase().startsWith('ACC');
                    } else if (majorFilter === 'finance') {
                        return mj.includes('مالية') || code.toUpperCase().startsWith('FIN');
                    } else if (majorFilter === 'ecommerce') {
                        return mj.includes('تجارة') || code.toUpperCase().startsWith('ECOM');
                    }
                    return true;
                }

                function matchesLevel(course) {
                    if (!levelFilter) return true;
                    return Number(course.level) === parseInt(levelFilter, 10);
                }
                function matchesHours(course) {
                    if (!hoursFilter) return true;
                    return Number(course.credits) === parseInt(hoursFilter, 10);
                }

                if (matchBase && matchesMajor(course, code) && matchesLevel(course) && matchesHours(course)) {
                    found = true;
                    const level = course.level || 3;
                    const isUserAdded = course.addedBy ? true : false; // Check if course has addedBy field
                    const addedBy = course.addedBy || null;
                    
                    console.log(`🔍 Found course: ${code}`, { isUserAdded, addedBy, course });
                    
                    // Create course card
                    const courseCard = document.createElement('div');
                    courseCard.className = 'course-card glow-border rounded-2xl p-8 group overflow-hidden relative';
                    courseCard.innerHTML = `
                        <span class="level-badge level-${level}">المستوى ${level}</span>
                        ${isUserAdded ? '<span class="absolute top-2 right-2 bg-aurora text-white text-xs px-2 py-1 rounded-full z-20">مجتمع</span>' : ''}
                        <div class="absolute -right-10 -top-10 w-40 h-40 rounded-full bg-plasma/10 blur-xl group-hover:bg-plasma/20 transition duration-500"></div>
                        <div class="relative z-10">
                            <div class="w-14 h-14 icon-bg rounded-xl flex items-center justify-center mb-6">
                                <i class="fas fa-laptop-code text-white text-xl"></i>
                            </div>
                            <h3 class="text-2xl font-bold text-white mb-3">${code}</h3>
                            <h4 class="text-xl font-bold text-white mb-4">${course.title}</h4>
                            <p class="text-stardust/70 mb-6">${course.desc.substring(0, 100)}...</p>
                            <div class="flex flex-wrap gap-2 mb-4">
                                <span class="bg-nebula/30 text-photon text-xs px-3 py-1 rounded-full">${course.credits || 3} ساعات</span>
                                <span class="bg-nebula/30 text-photon text-xs px-3 py-1 rounded-full">${course.major || 'غير محدد'}</span>
                            </div>
                            ${addedBy ? `
                                <div class="mb-4 p-3 bg-nebula/20 rounded-lg border border-stardust/10">
                                    <div class="flex items-center text-stardust/80 text-sm">
                                        <i class="fas fa-user-plus text-aurora ml-2"></i>
                                        <span>أضيفت بواسطة: <span class="text-aurora font-medium">${addedBy.name}</span></span>
                                    </div>
                                </div>
                            ` : ''}
                            <button onclick="openModal('${code}', '${course.title}')" class="inline-flex items-center text-photon group-hover:text-white transition duration-300 font-medium">
                                استكشاف المادة <i class="fas fa-arrow-left ml-2 transition-transform duration-300 group-hover:-translate-x-1"></i>
                            </button>
                        </div>
                    `;
                    searchResultsContainer.appendChild(courseCard);
                }
            });
            
            if (!found) {
                searchResultsContainer.innerHTML = '<p class="text-stardust/70 text-center col-span-3 py-12">لا توجد مواد تطابق بحثك.</p>';
            }
        }
        
        // Function to clear search
        function clearSearch() {
            document.getElementById("courseSearch").value = '';
            document.getElementById("search-results").classList.add("hidden");
            document.querySelectorAll("section[id='cs'], section[id='ds'], section[id='it'], section[id='ecommerce'], section[id='overview']").forEach(section => {
                section.classList.remove("hidden");
            });
        }

        // Note: Disabled auto-search on typing to match global behavior.
        // Searches are triggered by Enter or the explicit "بحث" button only.
        
        // Filter buttons listeners
        (function(){
            const applyBtn = document.getElementById('applyFiltersBtn');
            const clearBtn = document.getElementById('clearFiltersBtn');
            if (applyBtn) applyBtn.addEventListener('click', function(e){ e.preventDefault(); e.stopPropagation(); searchCourses(); });
            if (clearBtn) clearBtn.addEventListener('click', function(e){ e.preventDefault(); e.stopPropagation();
                if (document.getElementById('majorFilter')) document.getElementById('majorFilter').value='';
                if (document.getElementById('levelFilter')) document.getElementById('levelFilter').value='';
                if (document.getElementById('hoursFilter')) document.getElementById('hoursFilter').value='';
                searchCourses();
            });
        })();
        
        // Add event listener for Enter key in search
        document.getElementById("courseSearch").addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                searchCourses();
            }
        });
    </script>
    <script>
        // Search icon positioning functionality
        document.addEventListener('DOMContentLoaded', function() {
            const icon = document.querySelector('.icon');
            const input = document.querySelector('.input');
            let isExpanded = false;
            
            // Handle icon click
            icon.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                
                if (!isExpanded) {
                    // Expand the input
                    input.focus();
                    expandInput();
                } else if (input.value.trim() !== '') {
                    // If already expanded and has text, perform search
                    searchCourses();
                } else {
                    // Just focus if no text
                    input.focus();
                }
            });
            
            // Handle input focus
            input.addEventListener('focus', function() {
                expandInput();
            });
            
            // Handle input blur
            input.addEventListener('blur', function() {
                if (input.value === '') {
                    collapseInput();
                }
            });
            
            // Handle input value change
            input.addEventListener('input', function() {
                if (input.value !== '' && !isExpanded) {
                    expandInput();
                }
                // Trigger search as user types
                searchCourses();
            });
            
            // Function to expand input
            function expandInput() {
                if (!isExpanded) {
                    isExpanded = true;
                    input.classList.add('expanded');
                    icon.style.right = '15px';
                    icon.style.transform = 'translateX(0)';
                }
            }
            
            // Function to collapse input
            function collapseInput() {
                if (isExpanded) {
                    isExpanded = false;
                    input.classList.remove('expanded');
                    icon.style.right = '50%';
                    icon.style.transform = 'translateX(50%)';
                }
            }
        });

        // Mobile Menu Toggle Functionality
        function toggleMobileMenu() {
            const mobileMenu = document.getElementById('mobile-menu');
            const menuBtn = document.getElementById('mobile-menu-btn');
            
            if (mobileMenu.classList.contains('hidden')) {
                mobileMenu.classList.remove('hidden');
                menuBtn.innerHTML = '<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>';
            } else {
                mobileMenu.classList.add('hidden');
                menuBtn.innerHTML = '<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>';
            }
        }

        // Add Course Modal Functions
        function openAddCourseModal() {
            const modal = document.getElementById("addCourseModal");
            const modalContent = modal.querySelector('.glass-card');
            modal.classList.remove("hidden");
            modalContent.classList.add("modal-enter");
            document.body.style.overflow = 'hidden';
            
            // Update form user info when modal opens
            updateAuthUI();
            
            // Remove animation class after animation ends
            setTimeout(() => {
                modalContent.classList.remove("modal-enter");
            }, 300);
        }
        
        // Authentication UI Update Function
        function updateAuthUI() {
            const user = auth.currentUser;
            const formUserName = document.getElementById('form-user-name');
            const formUserStatus = document.getElementById('form-user-status');
            const formUserIcon = document.getElementById('form-user-icon');
            const userInfo = document.getElementById('user-info');
            const loginSection = document.getElementById('login-section');
            const addCourseBtn = document.getElementById('add-course-btn');
            const mobileUserInfo = document.getElementById('mobile-user-info');
            const mobileLoginSection = document.getElementById('mobile-login-section');
            const mobileUserName = document.getElementById('mobile-user-name');
            
            if (user) {
                // User is signed in
                userInfo.classList.remove('hidden');
                loginSection.classList.add('hidden');
                addCourseBtn.classList.remove('hidden');
                mobileUserInfo.classList.remove('hidden');
                mobileLoginSection.classList.add('hidden');
                
                const userName = user.displayName || user.email;
                
                if (formUserName) {
                    formUserName.textContent = userName;
                }
                if (formUserStatus) {
                    formUserStatus.textContent = 'مسجل الدخول';
                }
                if (formUserIcon) {
                    formUserIcon.innerHTML = '<i class="fas fa-user-check text-xl"></i>';
                    formUserIcon.className = 'text-aurora';
                }
                if (mobileUserName) {
                    mobileUserName.textContent = userName;
                }
                document.getElementById('user-name').textContent = userName;
            } else {
                // User is signed out
                userInfo.classList.add('hidden');
                loginSection.classList.remove('hidden');
                addCourseBtn.classList.add('hidden');
                mobileUserInfo.classList.add('hidden');
                mobileLoginSection.classList.remove('hidden');
                
                if (formUserName) {
                    formUserName.textContent = 'غير مسجل الدخول';
                }
                if (formUserStatus) {
                    formUserStatus.textContent = 'يجب تسجيل الدخول لإضافة مادة';
                }
                if (formUserIcon) {
                    formUserIcon.innerHTML = '<i class="fas fa-user-times text-xl"></i>';
                    formUserIcon.className = 'text-plasma';
                }
            }
            
            // Always ensure form user section is visible
            const formUserSection = document.querySelector('#addCourseForm .bg-nebula\\/30');
            if (formUserSection) {
                formUserSection.style.display = 'block';
            }
        }
        
        // Authentication functions
        function showLoginModal() {
            document.getElementById('loginModal').classList.remove('hidden');
        }
        
        function closeLoginModal() {
            document.getElementById('loginModal').classList.add('hidden');
            document.getElementById('loginForm').reset();
        }
        
        function showRegisterModal() {
            document.getElementById('registerModal').classList.remove('hidden');
        }
        
        function closeRegisterModal() {
            document.getElementById('registerModal').classList.add('hidden');
            document.getElementById('registerForm').reset();
        }
        
        function logout() {
            auth.signOut().then(() => {
                updateAuthUI();
                closeAddCourseModal();
            }).catch((error) => {
                console.error('خطأ في تسجيل الخروج:', error);
            });
        }
        
        // Forgot Password functions
        function showForgotPasswordModal() {
            closeLoginModal();
            document.getElementById('forgotPasswordModal').classList.remove('hidden');
        }
        
        function closeForgotPasswordModal() {
            document.getElementById('forgotPasswordModal').classList.add('hidden');
            document.getElementById('forgotPasswordForm').reset();
        }

        function closeAddCourseModal() {
            const modal = document.getElementById("addCourseModal");
            modal.classList.add("hidden");
            document.body.style.overflow = 'auto';
            // Reset form
            document.getElementById('addCourseForm').reset();
            // Reset resources to one input
            const container = document.getElementById('resourcesContainer');
            container.innerHTML = `
                <div class="resource-input flex gap-3">
                    <select class="resource-type px-3 py-2 bg-nebula/50 border border-nebula rounded-lg text-white focus:border-photon focus:outline-none">
                        <option value="youtube">يوتيوب</option>
                        <option value="drive">درايف</option>
                        <option value="telegram">تليجرام</option>
                        <option value="mega">ميجا</option>
                        <option value="other">أخرى</option>
                    </select>
                    <input type="text" class="resource-text flex-1 px-3 py-2 bg-nebula/50 border border-nebula rounded-lg text-white placeholder-stardust/50 focus:border-photon focus:outline-none" placeholder="عنوان المصدر">
                    <input type="url" class="resource-link flex-1 px-3 py-2 bg-nebula/50 border border-nebula rounded-lg text-white placeholder-stardust/50 focus:border-photon focus:outline-none" placeholder="https://...">
                    <button type="button" onclick="removeResource(this)" class="resource-delete-btn">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" height="16" width="16">
                            <path fill="#ef4444" d="M8.78842 5.03866C8.86656 4.96052 8.97254 4.91663 9.08305 4.91663H11.4164C11.5269 4.91663 11.6329 4.96052 11.711 5.03866C11.7892 5.11681 11.833 5.22279 11.833 5.33329V5.74939H8.66638V5.33329C8.66638 5.22279 8.71028 5.11681 8.78842 5.03866ZM7.16638 5.74939V5.33329C7.16638 4.82496 7.36832 4.33745 7.72776 3.978C8.08721 3.61856 8.57472 3.41663 9.08305 3.41663H11.4164C11.9247 3.41663 12.4122 3.61856 12.7717 3.978C13.1311 4.33745 13.333 4.82496 13.333 5.33329V5.74939H15.5C15.9142 5.74939 16.25 6.08518 16.25 6.49939C16.25 6.9136 15.9142 7.24939 15.5 7.24939H15.0105L14.2492 14.7095C14.2382 15.2023 14.0377 15.6726 13.6883 16.0219C13.3289 16.3814 12.8414 16.5833 12.333 16.5833H8.16638C7.65805 16.5833 7.17054 16.3814 6.81109 16.0219C6.46176 15.6726 6.2612 15.2023 6.25019 14.7095L5.48896 7.24939H5C4.58579 7.24939 4.25 6.9136 4.25 6.49939C4.25 6.08518 4.58579 5.74939 5 5.74939H6.16667H7.16638ZM7.91638 7.24996H12.583H13.5026L12.7536 14.5905C12.751 14.6158 12.7497 14.6412 12.7497 14.6666C12.7497 14.7771 12.7058 14.8831 12.6277 14.9613C12.5495 15.0394 12.4436 15.0833 12.333 15.0833H8.16638C8.05588 15.0833 7.94989 15.0394 7.87175 14.9613C7.79361 14.8831 7.74972 14.7771 7.74972 14.6666C7.74972 14.6412 7.74842 14.6158 7.74584 14.5905L6.99681 7.24996H7.91638Z" clip-rule="evenodd" fill-rule="evenodd"></path>
                        </svg>
                        <span class="resource-delete-tooltiptext">حذف</span>
                    </button>
                </div>
            `;
        }

        function addResourceInput() {
            const container = document.getElementById('resourcesContainer');
            const newResourceDiv = document.createElement('div');
            newResourceDiv.className = 'resource-input flex gap-3';
            newResourceDiv.innerHTML = `
                <select class="resource-type px-3 py-2 bg-nebula/50 border border-nebula rounded-lg text-white focus:border-photon focus:outline-none">
                    <option value="youtube">يوتيوب</option>
                    <option value="drive">درايف</option>
                    <option value="telegram">تليجرام</option>
                    <option value="mega">ميجا</option>
                    <option value="other">أخرى</option>
                </select>
                <input type="text" class="resource-text flex-1 px-3 py-2 bg-nebula/50 border border-nebula rounded-lg text-white placeholder-stardust/50 focus:border-photon focus:outline-none" placeholder="عنوان المصدر">
                <input type="url" class="resource-link flex-1 px-3 py-2 bg-nebula/50 border border-nebula rounded-lg text-white placeholder-stardust/50 focus:border-photon focus:outline-none" placeholder="https://...">
                <button type="button" onclick="removeResource(this)" class="resource-delete-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" height="16" width="16">
                        <path fill="#ef4444" d="M8.78842 5.03866C8.86656 4.96052 8.97254 4.91663 9.08305 4.91663H11.4164C11.5269 4.91663 11.6329 4.96052 11.711 5.03866C11.7892 5.11681 11.833 5.22279 11.833 5.33329V5.74939H8.66638V5.33329C8.66638 5.22279 8.71028 5.11681 8.78842 5.03866ZM7.16638 5.74939V5.33329C7.16638 4.82496 7.36832 4.33745 7.72776 3.978C8.08721 3.61856 8.57472 3.41663 9.08305 3.41663H11.4164C11.9247 3.41663 12.4122 3.61856 12.7717 3.978C13.1311 4.33745 13.333 4.82496 13.333 5.33329V5.74939H15.5C15.9142 5.74939 16.25 6.08518 16.25 6.49939C16.25 6.9136 15.9142 7.24939 15.5 7.24939H15.0105L14.2492 14.7095C14.2382 15.2023 14.0377 15.6726 13.6883 16.0219C13.3289 16.3814 12.8414 16.5833 12.333 16.5833H8.16638C7.65805 16.5833 7.17054 16.3814 6.81109 16.0219C6.46176 15.6726 6.2612 15.2023 6.25019 14.7095L5.48896 7.24939H5C4.58579 7.24939 4.25 6.9136 4.25 6.49939C4.25 6.08518 4.58579 5.74939 5 5.74939H6.16667H7.16638ZM7.91638 7.24996H12.583H13.5026L12.7536 14.5905C12.751 14.6158 12.7497 14.6412 12.7497 14.6666C12.7497 14.7771 12.7058 14.8831 12.6277 14.9613C12.5495 15.0394 12.4436 15.0833 12.333 15.0833H8.16638C8.05588 15.0833 7.94989 15.0394 7.87175 14.9613C7.79361 14.8831 7.74972 14.7771 7.74972 14.6666C7.74972 14.6412 7.74842 14.6158 7.74584 14.5905L6.99681 7.24996H7.91638Z" clip-rule="evenodd" fill-rule="evenodd"></path>
                    </svg>
                    <span class="resource-delete-tooltiptext">حذف</span>
                </button>
            `;
            container.appendChild(newResourceDiv);
        }

        function removeResource(button) {
            const container = document.getElementById('resourcesContainer');
            if (container.children.length > 1) {
                button.parentElement.remove();
            }
        }

        function generateUniqueId() {
            const majors = {
                'إدارة الأعمال': 'BA',
                'المحاسبة': 'AC',
                'الإدارة المالية': 'FM',
                'التجارة الإلكترونية': 'EC',
                'المواد العامة': 'GEN'
            };
            
            const majorSelect = document.getElementById('courseMajor');
            const prefix = majors[majorSelect.value] || 'GEN';
            
            // Generate a random number
            let code;
            do {
                const randomNum = Math.floor(Math.random() * 900) + 100; // 100-999
                code = prefix + randomNum;
            } while (courses[code]); // Ensure uniqueness
            
            return code;
        }

        // Function to validate course input
        function validateCourseInput(courseTitle, courseDesc, courseCode = null) {
            const errors = [];
            
            // Check course code format (if provided)
            if (courseCode) {
                const hasLetters = /[A-Za-z]/.test(courseCode);
                const hasNumbers = /[0-9]/.test(courseCode);
                
                if (!hasLetters || !hasNumbers) {
                    errors.push('رمز المادة يجب أن يحتوي على أحرف وأرقام معاً (مثال: BUS101, ACC240)');
                }
                
                if (courseCode.length < 3) {
                    errors.push('رمز المادة يجب أن يكون 3 أحرف على الأقل');
                }
            }
            
            // Check course title length (minimum 3 characters)
            if (courseTitle.length < 3) {
                errors.push('اسم المادة يجب أن يكون 3 أحرف على الأقل');
            }
            
            // Check course description word count (minimum 6 words)
            const wordCount = courseDesc.split(/\s+/).filter(word => word.length > 0).length;
            if (wordCount < 6) {
                errors.push('وصف المادة يجب أن يحتوي على 6 كلمات على الأقل');
            }
            
            return errors;
        }

        // Function to add real-time validation feedback
        function setupRealtimeValidation() {
            // Add validation for Add Course form
            const addCodeInput = document.getElementById('courseCode');
            const addTitleInput = document.getElementById('courseTitle');
            const addDescInput = document.getElementById('courseDesc');
            
            // Add validation for Edit Course form
            const editTitleInput = document.getElementById('editCourseTitle');
            const editDescInput = document.getElementById('editCourseDesc');
            
            // Create validation message elements
            function createValidationMessage(inputElement, messageId) {
                const existingMessage = document.getElementById(messageId);
                if (existingMessage) {
                    existingMessage.remove();
                }
                
                const messageDiv = document.createElement('div');
                messageDiv.id = messageId;
                messageDiv.className = 'text-xs mt-1 transition-colors duration-300';
                inputElement.parentNode.appendChild(messageDiv);
                return messageDiv;
            }
            
            // Course code validation
            function validateCourseCode(input, messageId) {
                const messageDiv = createValidationMessage(input, messageId);
                const value = input.value.trim().toUpperCase();
                const hasLetters = /[A-Za-z]/.test(value);
                const hasNumbers = /[0-9]/.test(value);
                
                if (value.length === 0) {
                    messageDiv.textContent = '';
                    messageDiv.className = 'text-xs mt-1 transition-colors duration-300';
                } else if (value.length < 3) {
                    messageDiv.textContent = `${value.length}/3 - يحتاج ${3 - value.length} أحرف أخرى`;
                    messageDiv.className = 'text-xs mt-1 text-supernova transition-colors duration-300';
                } else if (!hasLetters || !hasNumbers) {
                    messageDiv.textContent = 'يجب أن يحتوي على أحرف وأرقام معاً (مثال: BUS101)';
                    messageDiv.className = 'text-xs mt-1 text-supernova transition-colors duration-300';
                } else {
                    messageDiv.textContent = '✓ رمز صحيح';
                    messageDiv.className = 'text-xs mt-1 text-green-400 transition-colors duration-300';
                }
            }
            
            // Title validation
            function validateTitle(input, messageId) {
                const messageDiv = createValidationMessage(input, messageId);
                const value = input.value.trim();
                const charCount = value.length;
                
                if (charCount === 0) {
                    messageDiv.textContent = '';
                    messageDiv.className = 'text-xs mt-1 transition-colors duration-300';
                } else if (charCount < 3) {
                    messageDiv.textContent = `${charCount}/3 - يحتاج ${3 - charCount} أحرف أخرى`;
                    messageDiv.className = 'text-xs mt-1 text-supernova transition-colors duration-300';
                } else {
                    messageDiv.textContent = `${charCount}/3 - ✓ مقبول`;
                    messageDiv.className = 'text-xs mt-1 text-green-400 transition-colors duration-300';
                }
            }
            
            // Description validation
            function validateDescription(input, messageId) {
                const messageDiv = createValidationMessage(input, messageId);
                const value = input.value.trim();
                const wordCount = value.split(/\s+/).filter(word => word.length > 0).length;
                
                if (value.length === 0) {
                    messageDiv.textContent = '';
                    messageDiv.className = 'text-xs mt-1 transition-colors duration-300';
                } else if (wordCount < 6) {
                    messageDiv.textContent = `${wordCount}/6 كلمات - يحتاج ${6 - wordCount} كلمات أخرى`;
                    messageDiv.className = 'text-xs mt-1 text-supernova transition-colors duration-300';
                } else {
                    messageDiv.textContent = `${wordCount}/6 كلمات - ✓ مقبول`;
                    messageDiv.className = 'text-xs mt-1 text-green-400 transition-colors duration-300';
                }
            }
            
            // Add event listeners
            if (addCodeInput) {
                addCodeInput.addEventListener('input', function() {
                    // Convert to uppercase automatically
                    this.value = this.value.toUpperCase();
                    validateCourseCode(addCodeInput, 'add-code-validation');
                });
            }
            if (addTitleInput) {
                addTitleInput.addEventListener('input', () => validateTitle(addTitleInput, 'add-title-validation'));
            }
            if (addDescInput) {
                addDescInput.addEventListener('input', () => validateDescription(addDescInput, 'add-desc-validation'));
            }
            if (editTitleInput) {
                editTitleInput.addEventListener('input', () => validateTitle(editTitleInput, 'edit-title-validation'));
            }
            if (editDescInput) {
                editDescInput.addEventListener('input', () => validateDescription(editDescInput, 'edit-desc-validation'));
            }
        }

        // Call setup function when page loads
        document.addEventListener('DOMContentLoaded', function() {
            setupRealtimeValidation();
        });

        // Add Course Form Submission
        document.getElementById('addCourseForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const courseCode = formData.get('courseCode').toUpperCase().trim();
            const courseTitle = formData.get('courseTitle').trim();
            const courseDesc = formData.get('courseDesc').trim();
            const courseMajor = formData.get('courseMajor');
            const courseLevel = parseInt(formData.get('courseLevel'));
            const courseCredits = parseInt(formData.get('courseCredits')) || 3;

            // Validate required fields
            if (!courseCode || !courseTitle || !courseDesc || !courseMajor || !courseLevel) {
                alert('يرجى ملء جميع الحقول المطلوبة');
                return;
            }

            // Validate course code, title and description
            const validationErrors = validateCourseInput(courseTitle, courseDesc, courseCode);
            if (validationErrors.length > 0) {
                alert('خطأ في البيانات:\n\n' + validationErrors.join('\n'));
                return;
            }

            // Check if course code already exists
            if (courses[courseCode]) {
                alert('رمز المادة موجود مسبقاً. يرجى اختيار رمز مختلف.');
                return;
            }

            // Collect resources
            const resourceInputs = document.querySelectorAll('.resource-input');
            const resources = [];
            
            resourceInputs.forEach(input => {
                const type = input.querySelector('.resource-type').value;
                const text = input.querySelector('.resource-text').value.trim();
                const link = input.querySelector('.resource-link').value.trim();
                
                if (text && link) {
                    resources.push({ type, text, link });
                }
            });

            // Get current user from Firebase Auth
            let addedById = 'anonymous';
            let addedByName = 'مستخدم مجهول';
            let addedByEmail = '';
            if (window.firebase && firebase.auth && firebase.auth().currentUser) {
                const user = firebase.auth().currentUser;
                addedById = user.uid;
                addedByName = user.displayName || user.email || 'مستخدم مجهول';
                addedByEmail = user.email || '';
            }

            // Create new course object with user attribution
            const newCourse = {
                title: courseTitle,
                desc: courseDesc,
                credits: courseCredits,
                prereq: null,
                schedule: null,
                instructor: null,
                hours: courseCredits,
                major: courseMajor,
                level: courseLevel,
                resources: resources,
                addedBy: {
                    id: addedById,
                    name: addedByName,
                    email: addedByEmail
                }
            };

            // Add directly to courses object (same as existing courses)
            courses[courseCode] = newCourse;
            console.log('Added course to local courses object:', courseCode);

            // Save to Firebase for global persistence
            saveCourseToFirebase(courseCode, newCourse);

            // Show success message with custom notification
            showSuccessNotification('✅ تم إضافة المادة بنجاح! ستظهر لجميع المستخدمين فوراً', courseTitle);

            // Close modal
            closeAddCourseModal();

            // Show the newly added course immediately without page reload
            setTimeout(() => {
                // If user is viewing all courses for this major, refresh that view
                const currentTitle = document.getElementById('allCoursesTitle').textContent;
                if (currentTitle.includes(courseMajor) && !document.getElementById("allCoursesModal").classList.contains("hidden")) {
                    let majorCode = null;
                    if (courseMajor === 'إدارة الأعمال') {
                        majorCode = 'cs';
                    } else if (courseMajor === 'المحاسبة') {
                        majorCode = 'ds';
                    } else if (courseMajor === 'الإدارة المالية') {
                        majorCode = 'it';
                    } else if (courseMajor === 'التجارة الإلكترونية') {
                        majorCode = 'ecommerce';
                    }
                    
                    if (majorCode) {
                        showAllCourses(majorCode);
                    }
                }
                
                // Clear search to show all content and refresh display
                clearSearch();
                
                // Force refresh to show new course
                if (searchCourses && typeof searchCourses === 'function') {
                    searchCourses();
                    clearSearch();
                }
            }, 500);
        });

        // Edit Course Modal Functions
        function openEditCourseModal(courseCode) {
            const course = courses[courseCode];
            if (!course) {
                alert("المادة غير موجودة في النظام");
                return;
            }

            // Populate edit form with current course data
            document.getElementById('editCourseCode').value = courseCode;
            document.getElementById('editCourseTitle').value = course.title;
            document.getElementById('editCourseDesc').value = course.desc;
            document.getElementById('editCourseMajor').value = course.major;
            document.getElementById('editCourseLevel').value = course.level;
            document.getElementById('editCourseCredits').value = course.credits || 3;

            // Populate resources
            const container = document.getElementById('editResourcesContainer');
            container.innerHTML = '';
            
            if (course.resources && course.resources.length > 0) {
                course.resources.forEach(resource => {
                    addEditResourceInputWithData(resource);
                });
            } else {
                addEditResourceInput();
            }

            // Show modal
            const modal = document.getElementById("editCourseModal");
            const modalContent = modal.querySelector('.glass-card');
            modal.classList.remove("hidden");
            modalContent.classList.add("modal-enter");
            document.body.style.overflow = 'hidden';
            
            // Remove animation class after animation ends
            setTimeout(() => {
                modalContent.classList.remove("modal-enter");
            }, 300);
        }

        function closeEditCourseModal() {
            const modal = document.getElementById("editCourseModal");
            modal.classList.add("hidden");
            document.body.style.overflow = 'auto';
            // Reset form
            document.getElementById('editCourseForm').reset();
            // Reset resources to one input
            const container = document.getElementById('editResourcesContainer');
            container.innerHTML = '';
        }

        function addEditResourceInput() {
            const container = document.getElementById('editResourcesContainer');
            const newResourceDiv = document.createElement('div');
            newResourceDiv.className = 'resource-input flex gap-3';
            newResourceDiv.innerHTML = `
                <select class="resource-type px-3 py-2 bg-nebula/50 border border-nebula rounded-lg text-white focus:border-photon focus:outline-none">
                    <option value="youtube">يوتيوب</option>
                    <option value="drive">درايف</option>
                    <option value="telegram">تليجرام</option>
                    <option value="mega">ميجا</option>
                    <option value="other">أخرى</option>
                </select>
                <input type="text" class="resource-text flex-1 px-3 py-2 bg-nebula/50 border border-nebula rounded-lg text-white placeholder-stardust/50 focus:border-photon focus:outline-none" placeholder="عنوان المصدر">
                <input type="url" class="resource-link flex-1 px-3 py-2 bg-nebula/50 border border-nebula rounded-lg text-white placeholder-stardust/50 focus:border-photon focus:outline-none" placeholder="https://...">
                <button type="button" onclick="removeEditResource(this)" class="resource-delete-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" height="16" width="16">
                        <path fill="#ef4444" d="M8.78842 5.03866C8.86656 4.96052 8.97254 4.91663 9.08305 4.91663H11.4164C11.5269 4.91663 11.6329 4.96052 11.711 5.03866C11.7892 5.11681 11.833 5.22279 11.833 5.33329V5.74939H8.66638V5.33329C8.66638 5.22279 8.71028 5.11681 8.78842 5.03866ZM7.16638 5.74939V5.33329C7.16638 4.82496 7.36832 4.33745 7.72776 3.978C8.08721 3.61856 8.57472 3.41663 9.08305 3.41663H11.4164C11.9247 3.41663 12.4122 3.61856 12.7717 3.978C13.1311 4.33745 13.333 4.82496 13.333 5.33329V5.74939H15.5C15.9142 5.74939 16.25 6.08518 16.25 6.49939C16.25 6.9136 15.9142 7.24939 15.5 7.24939H15.0105L14.2492 14.7095C14.2382 15.2023 14.0377 15.6726 13.6883 16.0219C13.3289 16.3814 12.8414 16.5833 12.333 16.5833H8.16638C7.65805 16.5833 7.17054 16.3814 6.81109 16.0219C6.46176 15.6726 6.2612 15.2023 6.25019 14.7095L5.48896 7.24939H5C4.58579 7.24939 4.25 6.9136 4.25 6.49939C4.25 6.08518 4.58579 5.74939 5 5.74939H6.16667H7.16638ZM7.91638 7.24996H12.583H13.5026L12.7536 14.5905C12.751 14.6158 12.7497 14.6412 12.7497 14.6666C12.7497 14.7771 12.7058 14.8831 12.6277 14.9613C12.5495 15.0394 12.4436 15.0833 12.333 15.0833H8.16638C8.05588 15.0833 7.94989 15.0394 7.87175 14.9613C7.79361 14.8831 7.74972 14.7771 7.74972 14.6666C7.74972 14.6412 7.74842 14.6158 7.74584 14.5905L6.99681 7.24996H7.91638Z" clip-rule="evenodd" fill-rule="evenodd"></path>
                    </svg>
                    <span class="resource-delete-tooltiptext">حذف</span>
                </button>
            `;
            container.appendChild(newResourceDiv);
        }

        function addEditResourceInputWithData(resource) {
            const container = document.getElementById('editResourcesContainer');
            const newResourceDiv = document.createElement('div');
            newResourceDiv.className = 'resource-input flex gap-3';
            newResourceDiv.innerHTML = `
                <select class="resource-type px-3 py-2 bg-nebula/50 border border-nebula rounded-lg text-white focus:border-photon focus:outline-none">
                    <option value="youtube" ${resource.type === 'youtube' ? 'selected' : ''}>يوتيوب</option>
                    <option value="drive" ${resource.type === 'drive' ? 'selected' : ''}>درايف</option>
                    <option value="telegram" ${resource.type === 'telegram' ? 'selected' : ''}>تليجرام</option>
                    <option value="mega" ${resource.type === 'mega' ? 'selected' : ''}>ميجا</option>
                    <option value="other" ${resource.type === 'other' ? 'selected' : ''}>أخرى</option>
                </select>
                <input type="text" class="resource-text flex-1 px-3 py-2 bg-nebula/50 border border-nebula rounded-lg text-white placeholder-stardust/50 focus:border-photon focus:outline-none" placeholder="عنوان المصدر" value="${resource.text}">
                <input type="url" class="resource-link flex-1 px-3 py-2 bg-nebula/50 border border-nebula rounded-lg text-white placeholder-stardust/50 focus:border-photon focus:outline-none" placeholder="https://..." value="${resource.link}">
                <button type="button" onclick="removeEditResource(this)" class="resource-delete-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" height="16" width="16">
                        <path fill="#ef4444" d="M8.78842 5.03866C8.86656 4.96052 8.97254 4.91663 9.08305 4.91663H11.4164C11.5269 4.91663 11.6329 4.96052 11.711 5.03866C11.7892 5.11681 11.833 5.22279 11.833 5.33329V5.74939H8.66638V5.33329C8.66638 5.22279 8.71028 5.11681 8.78842 5.03866ZM7.16638 5.74939V5.33329C7.16638 4.82496 7.36832 4.33745 7.72776 3.978C8.08721 3.61856 8.57472 3.41663 9.08305 3.41663H11.4164C11.9247 3.41663 12.4122 3.61856 12.7717 3.978C13.1311 4.33745 13.333 4.82496 13.333 5.33329V5.74939H15.5C15.9142 5.74939 16.25 6.08518 16.25 6.49939C16.25 6.9136 15.9142 7.24939 15.5 7.24939H15.0105L14.2492 14.7095C14.2382 15.2023 14.0377 15.6726 13.6883 16.0219C13.3289 16.3814 12.8414 16.5833 12.333 16.5833H8.16638C7.65805 16.5833 7.17054 16.3814 6.81109 16.0219C6.46176 15.6726 6.2612 15.2023 6.25019 14.7095L5.48896 7.24939H5C4.58579 7.24939 4.25 6.9136 4.25 6.49939C4.25 6.08518 4.58579 5.74939 5 5.74939H6.16667H7.16638ZM7.91638 7.24996H12.583H13.5026L12.7536 14.5905C12.751 14.6158 12.7497 14.6412 12.7497 14.6666C12.7497 14.7771 12.7058 14.8831 12.6277 14.9613C12.5495 15.0394 12.4436 15.0833 12.333 15.0833H8.16638C8.05588 15.0833 7.94989 15.0394 7.87175 14.9613C7.79361 14.8831 7.74972 14.7771 7.74972 14.6666C7.74972 14.6412 7.74842 14.6158 7.74584 14.5905L6.99681 7.24996H7.91638Z" clip-rule="evenodd" fill-rule="evenodd"></path>
                    </svg>
                    <span class="resource-delete-tooltiptext">حذف</span>
                </button>
            `;
            container.appendChild(newResourceDiv);
        }

        function removeEditResource(button) {
            const container = document.getElementById('editResourcesContainer');
            if (container.children.length > 1) {
                button.parentElement.remove();
            }
        }

        // Edit Course Form Submission
        document.getElementById('editCourseForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const courseCode = document.getElementById('editCourseCode').value;
            const courseTitle = formData.get('courseTitle').trim();
            const courseDesc = formData.get('courseDesc').trim();
            const courseMajor = formData.get('courseMajor');
            const courseLevel = parseInt(formData.get('courseLevel'));
            const courseCredits = parseInt(formData.get('courseCredits')) || 3;

            // Validate required fields
            if (!courseTitle || !courseDesc || !courseMajor || !courseLevel) {
                alert('يرجى ملء جميع الحقول المطلوبة');
                return;
            }

            // Validate course title and description
            const validationErrors = validateCourseInput(courseTitle, courseDesc);
            if (validationErrors.length > 0) {
                alert('خطأ في البيانات:\n\n' + validationErrors.join('\n'));
                return;
            }

            // Collect resources
            const resourceInputs = document.querySelectorAll('#editResourcesContainer .resource-input');
            const resources = [];
            
            resourceInputs.forEach(input => {
                const type = input.querySelector('.resource-type').value;
                const text = input.querySelector('.resource-text').value.trim();
                const link = input.querySelector('.resource-link').value.trim();
                
                if (text && link) {
                    resources.push({ type, text, link });
                }
            });

            // Update course object
            const updatedCourse = {
                title: courseTitle,
                desc: courseDesc,
                credits: courseCredits,
                prereq: courses[courseCode].prereq || null,
                schedule: courses[courseCode].schedule || null,
                instructor: courses[courseCode].instructor || null,
                hours: courseCredits,
                major: courseMajor,
                level: courseLevel,
                resources: resources,
                updatedAt: Date.now()
            };

            // Update locally
            courses[courseCode] = updatedCourse;
            console.log('Updated course in local courses object:', courseCode);

            // Save to Firebase
            updateCourseInFirebase(courseCode, updatedCourse);

            // Show success message
            showSuccessNotification('✅ تم تحديث المادة بنجاح!', courseTitle);

            // Close modal
            closeEditCourseModal();

            // Refresh displays if needed
            setTimeout(() => {
                // Clear search to show all content and refresh display
                clearSearch();
                
                // Force refresh to show updated course
                if (searchCourses && typeof searchCourses === 'function') {
                    searchCourses();
                    clearSearch();
                }
            }, 500);
        });

        // Function to update course in Firebase
        async function updateCourseInFirebase(courseCode, courseData) {
            console.log('🔄 محاولة تحديث المادة في Firebase:', courseCode);
            try {
                await coursesCollection.doc(courseCode).update({
                    ...courseData,
                    updatedAt: firebase.firestore.FieldValue.serverTimestamp()
                });
                
                console.log('✅ تم تحديث المادة في Firebase بنجاح:', courseCode);
                
                // Also update localStorage as backup
                const savedCourses = JSON.parse(localStorage.getItem('userAddedCourses') || '{}');
                savedCourses[courseCode] = {...courseData, fromFirebase: true};
                localStorage.setItem('userAddedCourses', JSON.stringify(savedCourses));
                
            } catch (error) {
                console.error('❌ خطأ في تحديث المادة في Firebase:', error);
                alert('فشل في التحديث في السحابة. سيتم التحديث محلياً فقط.');
                
                // Fallback to localStorage only
                const savedCourses = JSON.parse(localStorage.getItem('userAddedCourses') || '{}');
                savedCourses[courseCode] = {...courseData, fromLocal: true};
                localStorage.setItem('userAddedCourses', JSON.stringify(savedCourses));
            }
        }

        // Firebase Functions for Course Management
        
        // Function to save course to Firebase
        async function saveCourseToFirebase(courseCode, courseData) {
            console.log('🔄 محاولة حفظ المادة في Firebase:', courseCode);
            try {
                const docRef = await coursesCollection.doc(courseCode).set({
                    ...courseData,
                    createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                    status: 'active',
                    timestamp: Date.now()
                });
                
                console.log('✅ تم حفظ المادة في Firebase بنجاح:', courseCode);
                
                // Also save to localStorage as backup
                const savedCourses = JSON.parse(localStorage.getItem('userAddedCourses') || '{}');
                savedCourses[courseCode] = {...courseData, fromFirebase: true};
                localStorage.setItem('userAddedCourses', JSON.stringify(savedCourses));

                // Update business cache immediately
                try {
                    const cacheRaw = localStorage.getItem(CACHE_KEY);
                    const cacheObj = cacheRaw ? JSON.parse(cacheRaw) : {};
                    cacheObj[courseCode] = {...courseData, fromFirebase: true};
                    setCachedCourses(cacheObj);
                } catch (e) { console.warn('تعذر تحديث كاش البزنس بعد الحفظ:', e); }
                
                // Verify the save by reading it back
                const verifyDoc = await coursesCollection.doc(courseCode).get();
                if (verifyDoc.exists) {
                    console.log('🔍 تأكيد: المادة موجودة في Firebase:', verifyDoc.data());
                } else {
                    console.log('❌ خطأ: المادة غير موجودة في Firebase بعد الحفظ');
                }
                
            } catch (error) {
                console.error('❌ خطأ في حفظ المادة في Firebase:', error);
                alert('فشل في الحفظ في السحابة. سيتم الحفظ محلياً فقط.');
                
                // Fallback to localStorage only
                const savedCourses = JSON.parse(localStorage.getItem('userAddedCourses') || '{}');
                savedCourses[courseCode] = {...courseData, fromLocal: true};
                localStorage.setItem('userAddedCourses', JSON.stringify(savedCourses));
            }
        }

        // Function to load all courses from Firebase
        async function loadCoursesFromFirebase() {
            console.log('🔄 جاري تحميل مواد البزنس (كاش أولاً)...');
            try {
                // 1) Load from cache first
                const cached = getCachedCourses();
                if (cached && Object.keys(cached).length) {
                    Object.assign(courses, cached);
                    console.log(`⚡ تم تحميل ${Object.keys(cached).length} مادة من الكاش`);
                }

                // If cache is fresh, skip Firestore
                if (cached && isCacheFresh()) {
                    console.log('🟢 الكاش حديث — تم تجاوز الجلب من القاعدة');
                    return;
                }

                // 2) Fetch from Firestore
                const snapshot = await coursesCollection.get();
                const firebaseCourses = {};
                
                console.log(`📊 عدد المستندات في Firebase: ${snapshot.size}`);
                
                snapshot.forEach(doc => {
                    console.log(`📄 مستند موجود: ${doc.id}`, doc.data());
                    firebaseCourses[doc.id] = doc.data();
                });
                
                // Merge Firebase courses with existing courses
                const beforeCount = Object.keys(courses).length;
                Object.assign(courses, firebaseCourses);
                const afterCount = Object.keys(courses).length;
                
                console.log(`📈 عدد المواد قبل التحميل: ${beforeCount}, بعد التحميل: ${afterCount}`);
                console.log('✅ تم دمج مواد Firebase مع المواد المحلية');
                // Update cache with latest Firebase courses
                setCachedCourses(firebaseCourses);
                
                // Also merge localStorage courses as backup
                const localCourses = JSON.parse(localStorage.getItem('userAddedCourses') || '{}');
                Object.assign(courses, localCourses);
                
                console.log(`🔥 تم تحميل ${Object.keys(firebaseCourses).length} مادة من Firebase`);
                
                if (Object.keys(firebaseCourses).length > 0) {
                    console.log('🎉 مواد Firebase المحملة:', Object.keys(firebaseCourses));
                }
                
            } catch (error) {
                console.error('❌ خطأ في تحميل المواد من Firebase:', error);
                
                // Fallback to localStorage
                const localCourses = JSON.parse(localStorage.getItem('userAddedCourses') || '{}');
                Object.assign(courses, localCourses);
                console.log('🔄 تم الرجوع للمواد المحلية فقط');
            }
        }

        // Function to delete a user-added course from Firebase
        async function deleteUserCourse(courseCode) {
            if (confirm('هل أنت متأكد من حذف هذه المادة؟ سيتم حذفها من جميع الأجهزة.')) {
                try {
                    // Delete from Firebase
                    await coursesCollection.doc(courseCode).delete();
                    
                    // Remove from courses object
                    delete courses[courseCode];
                    
                    // Remove from localStorage
                    const savedCourses = JSON.parse(localStorage.getItem('userAddedCourses') || '{}');
                    delete savedCourses[courseCode];
                    localStorage.setItem('userAddedCourses', JSON.stringify(savedCourses));
                    
                    showSuccessNotification('تم حذف المادة بنجاح!', '');
                    
                    // Refresh content
                    setTimeout(() => {
                        window.location.reload();
                    }, 1500);
                } catch (error) {
                    console.error('Error deleting course from Firebase:', error);
                    alert('فشل في حذف المادة. حاول مرة أخرى.');
                }
            }
        }

        // Function to check if course is user-added (checks both Firebase and localStorage)
        function isUserAddedCourse(courseCode) {
            // Check Firebase courses first (courses loaded from Firebase)
            const firebaseCourses = Object.keys(courses).filter(key => 
                courses[key].createdAt || courses[key].status === 'active' || courses[key].fromFirebase
            );
            
            if (firebaseCourses.includes(courseCode)) {
                return true;
            }
            
            // Fallback to localStorage check
            const savedCourses = JSON.parse(localStorage.getItem('userAddedCourses') || '{}');
            return savedCourses.hasOwnProperty(courseCode);
        }
        
        // Debug function to check Firebase data (call from console)
        window.checkFirebaseData = async function() {
            console.log('🔍 فحص بيانات Firebase...');
            try {
                const snapshot = await coursesCollection.get();
                console.log(`📊 عدد المستندات: ${snapshot.size}`);
                snapshot.forEach(doc => {
                    console.log(`📄 ${doc.id}:`, doc.data());
                });
                
                if (snapshot.size === 0) {
                    console.log('📭 لا توجد مواد في Firebase بعد');
                }
            } catch (error) {
                console.error('❌ خطأ في الفحص:', error);
            }
        };
        
        // Add a test course function (call from console)
        window.addTestCourse = async function() {
            const testCourse = {
                title: "مادة تجريبية",
                desc: "هذه مادة تجريبية للاختبار",
                credits: 3,
                major: "علوم الحاسب",
                level: 5,
                resources: []
            };
            
            await saveCourseToFirebase('TEST001', testCourse);
            console.log('✅ تم إضافة مادة تجريبية');
        };

        // Error notification function
        function showErrorNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'fixed top-4 right-4 z-50 glass-card rounded-lg p-4 border-l-4 border-red-500';
            notification.innerHTML = `
                <div class="flex items-center">
                    <div class="w-8 h-8 rounded-full bg-red-500 flex items-center justify-center mr-3">
                        <i class="fas fa-exclamation text-white"></i>
                    </div>
                    <div>
                        <div class="text-white font-bold">خطأ</div>
                        <div class="text-stardust/70 text-sm">${message}</div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // Remove notification after 3 seconds
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // Success Notification Function
        function showSuccessNotification(message, courseTitle) {
            // Create notification element
            const notification = document.createElement('div');
            notification.className = 'fixed top-4 right-4 z-50 glass-card rounded-lg p-4 success-message';
            notification.innerHTML = `
                <div class="flex items-center">
                    <div class="w-8 h-8 rounded-full bg-aurora flex items-center justify-center mr-3">
                        <i class="fas fa-check text-white"></i>
                    </div>
                    <div>
                        <div class="text-white font-bold">${message}</div>
                        <div class="text-stardust/70 text-sm">${courseTitle}</div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // Remove notification after 3 seconds
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // Load user courses from Firebase on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Load courses from Firebase (with localStorage fallback)
            loadCoursesFromFirebase();
        });

        // Mobile menu event listener
        document.addEventListener('DOMContentLoaded', function() {
            const mobileMenuBtn = document.getElementById('mobile-menu-btn');
            if (mobileMenuBtn) {
                mobileMenuBtn.addEventListener('click', toggleMobileMenu);
            }

            // Close mobile menu when clicking on links
            const mobileMenuLinks = document.querySelectorAll('#mobile-menu a');
            mobileMenuLinks.forEach(link => {
                link.addEventListener('click', () => {
                    document.getElementById('mobile-menu').classList.add('hidden');
                    document.getElementById('mobile-menu-btn').innerHTML = '<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>';
                });
            });

            // Handle mobile theme toggle
            const mobileThemeToggle = document.getElementById('toggle-mobile');
            const desktopThemeToggle = document.getElementById('toggle');
            
            if (mobileThemeToggle && desktopThemeToggle) {
                // Sync mobile toggle with desktop
                mobileThemeToggle.checked = desktopThemeToggle.checked;
                
                mobileThemeToggle.addEventListener('change', function() {
                    desktopThemeToggle.checked = this.checked;
                    const event = new Event('change');
                    desktopThemeToggle.dispatchEvent(event);
                });
            }

            // Close modals when clicking outside
            const addCourseModal = document.getElementById('addCourseModal');
            const courseModal = document.getElementById('courseModal');
            const allCoursesModal = document.getElementById('allCoursesModal');
            const loginModal = document.getElementById('loginModal');
            const registerModal = document.getElementById('registerModal');
            const forgotPasswordModal = document.getElementById('forgotPasswordModal');

            [addCourseModal, courseModal, allCoursesModal, loginModal, registerModal, forgotPasswordModal].forEach(modal => {
                if (modal) {
                    modal.addEventListener('click', function(e) {
                        if (e.target === modal) {
                            modal.classList.add('hidden');
                            document.body.style.overflow = 'auto';
                        }
                    });
                }
            });

            // Close modals with Escape key
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    const visibleModals = document.querySelectorAll('.fixed:not(.hidden)');
                    visibleModals.forEach(modal => {
                        if (modal.id.includes('Modal')) {
                            modal.classList.add('hidden');
                            document.body.style.overflow = 'auto';
                        }
                    });
                    
                    // Close mobile menu
                    const mobileMenu = document.getElementById('mobile-menu');
                    if (mobileMenu && !mobileMenu.classList.contains('hidden')) {
                        mobileMenu.classList.add('hidden');
                        document.getElementById('mobile-menu-btn').innerHTML = '<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>';
                    }
                }
            });
        });

        // Authentication state observer
        if (window.auth) {
            auth.onAuthStateChanged((user) => {
                updateAuthUI();
            });
        }
        
        // Login form submission
        document.getElementById('loginForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            try {
                await auth.signInWithEmailAndPassword(email, password);
                closeLoginModal();
                alert('تم تسجيل الدخول بنجاح!');
            } catch (error) {
                console.error('خطأ في تسجيل الدخول:', error);
                alert('خطأ في تسجيل الدخول: ' + error.message);
            }
        });
        
        // Register form submission
        document.getElementById('registerForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const name = document.getElementById('registerName').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            
            try {
                const userCredential = await auth.createUserWithEmailAndPassword(email, password);
                const user = userCredential.user;
                
                // Update display name
                await user.updateProfile({
                    displayName: name
                });
                
                // Add user to Firestore
                await db.collection('users').doc(user.uid).set({
                    name: name,
                    email: email,
                    createdAt: new Date().toISOString()
                });
                
                // Send email verification
                await user.sendEmailVerification();
                
                closeRegisterModal();
                showSuccessNotification('تم إنشاء الحساب بنجاح!', 'تم إرسال رابط تأكيد البريد الإلكتروني إلى بريدك');
            } catch (error) {
                console.error('خطأ في إنشاء الحساب:', error);
                alert('خطأ في إنشاء الحساب: ' + error.message);
            }
        });
        
        // Forgot Password form submission
        document.getElementById('forgotPasswordForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const email = document.getElementById('forgotPasswordEmail').value;
            
            try {
                await auth.sendPasswordResetEmail(email);
                closeForgotPasswordModal();
                showSuccessNotification('تم إرسال رابط إعادة التعيين!', 'تحقق من بريدك الإلكتروني لإعادة تعيين كلمة المرور');
            } catch (error) {
                console.error('خطأ في إرسال رابط إعادة التعيين:', error);
                alert('خطأ في إرسال رابط إعادة التعيين: ' + error.message);
            }
        });
        
        // Theme Toggle Functionality
        document.addEventListener('DOMContentLoaded', function() {
            const themeToggle = document.getElementById('toggle');
            const body = document.body;

            // Check for saved theme preference or default to dark mode
            const currentTheme = localStorage.getItem('theme') || 'dark';
            if (currentTheme === 'light') {
                body.classList.add('light-mode');
                if (themeToggle) themeToggle.checked = true; // checked = light mode = sun icon visible
            } else {
                // Ensure dark mode is default (unchecked = dark = moon icon visible)
                body.classList.remove('light-mode');
                if (themeToggle) themeToggle.checked = false; // unchecked = dark mode = moon icon visible
            }

            // Theme toggle event listener
            if (themeToggle) {
                themeToggle.addEventListener('change', function() {
                    if (this.checked) {
                        body.classList.add('light-mode');
                        localStorage.setItem('theme', 'light');
                    } else {
                        body.classList.remove('light-mode');
                        localStorage.setItem('theme', 'dark');
                    }
                });
            }
            
            // Initialize auth UI
            updateAuthUI();
        });
    </script>

    <!-- Forgot Password Modal -->
    <div id="forgotPasswordModal" class="fixed inset-0 bg-black/50 backdrop-blur-sm hidden flex items-center justify-center z-50">
        <div class="glass-card rounded-2xl p-8 m-4 w-full max-w-md">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-white">إعادة تعيين كلمة المرور</h2>
                <button onclick="closeForgotPasswordModal()" class="text-stardust hover:text-white transition duration-300">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            
            <form id="forgotPasswordForm" class="space-y-4">
                <div>
                    <label for="forgotPasswordEmail" class="block text-white font-medium mb-2">البريد الإلكتروني</label>
                    <input type="email" id="forgotPasswordEmail" name="email" required 
                           class="w-full px-4 py-3 bg-nebula/50 border border-stardust/20 rounded-lg text-white placeholder-stardust/50 focus:border-plasma focus:outline-none"
                           placeholder="أدخل بريدك الإلكتروني">
                </div>
                
                <div class="pt-4">
                    <button type="submit" class="w-full bg-gradient-to-r from-plasma to-aurora text-white py-3 rounded-lg hover:scale-105 transition duration-300 font-medium">
                        إرسال رابط إعادة التعيين
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="fixed inset-0 bg-black/50 backdrop-blur-sm hidden flex items-center justify-center z-50">
        <div class="glass-card rounded-2xl p-8 m-4 w-full max-w-md">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-white">تسجيل الدخول</h2>
                <button onclick="closeLoginModal()" class="text-stardust hover:text-white transition duration-300">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            
            <form id="loginForm" class="space-y-4">
                <div>
                    <label for="loginEmail" class="block text-white font-medium mb-2">البريد الإلكتروني</label>
                    <input type="email" id="loginEmail" name="email" required 
                           class="w-full px-4 py-3 bg-nebula/50 border border-stardust/20 rounded-lg text-white placeholder-stardust/50 focus:border-plasma focus:outline-none"
                           placeholder="أدخل بريدك الإلكتروني">
                </div>
                
                <div>
                    <label for="loginPassword" class="block text-white font-medium mb-2">كلمة المرور</label>
                    <input type="password" id="loginPassword" name="password" required 
                           class="w-full px-4 py-3 bg-nebula/50 border border-stardust/20 rounded-lg text-white placeholder-stardust/50 focus:border-plasma focus:outline-none"
                           placeholder="أدخل كلمة المرور">
                </div>
                
                <div class="text-right">
                    <button type="button" onclick="showForgotPasswordModal()" class="text-stardust hover:text-aurora text-sm transition duration-300">
                        نسيت كلمة المرور؟
                    </button>
                </div>
                
                <div class="pt-4">
                    <button type="submit" class="w-full bg-gradient-to-r from-plasma to-aurora text-white py-3 rounded-lg hover:scale-105 transition duration-300 font-medium">
                        تسجيل الدخول
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Register Modal -->
    <div id="registerModal" class="fixed inset-0 bg-black/50 backdrop-blur-sm hidden flex items-center justify-center z-50">
        <div class="glass-card rounded-2xl p-8 m-4 w-full max-w-md">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-white">إنشاء حساب جديد</h2>
                <button onclick="closeRegisterModal()" class="text-stardust hover:text-white transition duration-300">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            
            <form id="registerForm" class="space-y-4">
                <div>
                    <label for="registerName" class="block text-white font-medium mb-2">الاسم</label>
                    <input type="text" id="registerName" name="name" required 
                           class="w-full px-4 py-3 bg-nebula/50 border border-stardust/20 rounded-lg text-white placeholder-stardust/50 focus:border-plasma focus:outline-none"
                           placeholder="أدخل اسمك">
                </div>
                
                <div>
                    <label for="registerEmail" class="block text-white font-medium mb-2">البريد الإلكتروني</label>
                    <input type="email" id="registerEmail" name="email" required 
                           class="w-full px-4 py-3 bg-nebula/50 border border-stardust/20 rounded-lg text-white placeholder-stardust/50 focus:border-plasma focus:outline-none"
                           placeholder="أدخل بريدك الإلكتروني">
                </div>
                
                <div>
                    <label for="registerPassword" class="block text-white font-medium mb-2">كلمة المرور</label>
                    <input type="password" id="registerPassword" name="password" required 
                           class="w-full px-4 py-3 bg-nebula/50 border border-stardust/20 rounded-lg text-white placeholder-stardust/50 focus:border-plasma focus:outline-none"
                           placeholder="أدخل كلمة المرور">
                </div>
                
                <div class="pt-4">
                    <button type="submit" class="w-full bg-gradient-to-r from-plasma to-aurora text-white py-3 rounded-lg hover:scale-105 transition duration-300 font-medium">
                        إنشاء الحساب
                    </button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Language Toggle Script -->
    <script src="../../auth/language-toggle.js"></script>
    
    <!-- Cache Busting Script -->
    <script>
        // تطهير cache المتصفح
        if ('caches' in window) {
            caches.keys().then(names => {
                names.forEach(name => {
                    caches.delete(name);
                });
            });
        }
        
        // فرض إعادة تحميل CSS
        const currentTime = new Date().getTime();
        const links = document.getElementsByTagName('link');
        for (let i = 0; i < links.length; i++) {
            if (links[i].rel === 'stylesheet') {
                links[i].href = links[i].href + '?v=' + currentTime;
            }
        }
        
        console.log('✅ تم تحديث كروت المواد - سبتمبر 2025');
        console.log('📱 اختبر على الجوال الآن');
    </script>
</body>
</html>